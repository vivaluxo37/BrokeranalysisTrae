import{r as c,j as t}from"./Empty-CbVzuLts.js";import{A as w}from"./ArticleWrapper-Btznwlcr.js";import{L as v}from"./LegacySectionWrapper-BubYSw67.js";import{S as L}from"./Spinner-BVKQZHjL.js";import{B as C}from"./BrokerCardWithParams-Cs8EJKun.js";import{I}from"./InfoIcon-Cn4NulgY.js";import{S as j}from"./SectionTitle-saatoOkx.js";import{B as S}from"./BCTooltip-Bnjx6sPC.js";import{u as h}from"./useTranslation-DBGLPtMT.js";import{S as N}from"./SaveToWatchlistContextWrapper-CafF4tH5.js";import{c as x}from"./index-C6HkmSz0.js";import{B}from"./BCInputField-B7TjpJt6.js";import{P as M}from"./PageTitle-A0KhJMY8.js";import{e as T,E as F,V as _,s as y,cr as O}from"./app-core-DsZLvh-T.js";import"./BaseIcon-wXEPPWk8.js";import"./ImageAsBackground-BYbnEpTG.js";import"./BrokerLogoStarScoreHeader-D9yc7la4.js";import"./BCLink-C4ZKswFn.js";import"./ArrowLeftIcon-wxrY8ffS.js";import"./ArrowRightIcon-oGraQgyg.js";import"./ImpressionHandler-DnZ_lI5K.js";import"./getCloakedVisitBrokerUrlWithQueryParams-BNzLyufl.js";import"./getAbTests-sg48PVrR.js";import"./useBCClientSideData-CaltDZgi.js";import"./useMeasureImpression-Crl5RCea.js";import"./useHumanEyeEffect-CrozREcw.js";import"./isEqual-jqLKjBFs.js";import"./_baseIsEqual-BU7ud4ak.js";import"./VisitBrokerLink-DumHuGb7.js";import"./getScoreColorTextClass-CBK1cLHc.js";import"./Image-Cq_3T_IK.js";import"./SaveFavoriteBrokerButton-CclnIbHO.js";import"./index-BwKToVaI.js";import"./clsx-CA07h-Wh.js";import"./Button-DVEZb-KD.js";import"./Dialog-Dc9j5dN7.js";import"./floating-ui.react-CDjzeHtS.js";import"./floating-ui.dom-cvZeYP3P.js";import"./index-B_BLzt9w.js";import"./HandThumbUpIcon-DJCoY7Ty.js";import"./dashboardConsts-D2_jkG4e.js";import"./BookmarkIcon-DSzB8aBI.js";import"./VisitBrokerButton-BNlwGbUi.js";import"./ButtonOrLink-BXF_cz5f.js";import"./ArrowRightIcon-BPHA_4Zr.js";import"./preload-helper-9zrlRb12.js";import"./utils-B1GDy_RR.js";import"./XMarkIcon-zYCpwGN2.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},i=new e.Error().stack;i&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[i]="84713081-ed3c-42b0-8005-a51707f280f8",e._sentryDebugIdIdentifier="sentry-dbid-84713081-ed3c-42b0-8005-a51707f280f8")}catch{}{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:bc-frontend":!0})}const E=({sectionTitle:e,countryInTheName:i})=>{const{t:s}=h(),r=c.useMemo(()=>new Date().getFullYear(),[]);return t.jsxs(j,{center:!0,children:[e," ",t.jsx("br",{}),t.jsxs("span",{className:"flex flex-row justify-center text-2xl text-gray-400",children:[i?s("[countryTheName] in [year]",{countryTheName:i,year:r}):s("in [year]",{year:r}),t.jsx(S,{content:s(i?"Wrong country? Change it in the navigation bar to get accurate recommendations.":"Set your country in the navigation bar to get accurate recommendations."),position:"bottom",children:t.jsx(I,{className:"mx-1 mb-3 inline h-4 w-4 text-secondary-500"})})]})]})},R=e=>{const{brokers:i,countryInTheName:s,isLoading:r,title:a,emptyListLabel:o,outerClassName:d,backgroundElement:p,visitBrokerButtonMeasurementListId:n,visitBrokerLogoMeasurementListId:l,visitBrokerNameLinkMeasurementListId:u,readReviewLinkMeasurementListId:g}=e;return t.jsxs(v,{innerWidth:"max-w-[1200px]",outerPaddingClassName:"py-2 sm:py-10",backgroundElement:p,outerClassName:d,innerClassName:"flex flex-col justify-center items-center",children:[t.jsx(E,{sectionTitle:a,countryInTheName:s}),r&&t.jsx(L,{size:"large"}),t.jsxs("ul",{className:"custom-html-disabled mt-8 grid list-none grid-cols-1 gap-6 lg:grid-cols-3",children:[!r&&i.length>0&&i.map((f,m)=>t.jsx("li",{children:t.jsx(C,{broker:f,index:m,showSaveBroker:!0,logoMeasurementListId:l,nameLinkMeasurementListId:u,visitBrokerButtonMeasurementListId:n,readReviewLinkMeasurementListId:g})},f.id)),!r&&i.length===0&&t.jsx("div",{children:o})]})]})},b=c.createContext({state:{providers:[],filterOptions:[],searchInput:"",isLoading:!1,currentCountry:void 0},setState:()=>{}}),W=({checked:e,className:i,checkboxId:s,disabled:r,checkBoxClassName:a,hasError:o,onChange:d,Label:p})=>t.jsxs("div",{className:x("flex",i),children:[t.jsx("input",{id:s,type:"checkbox",checked:e,onChange:n=>!r&&d(n.target.checked),className:x(a,o?"border-danger-500":"border-secondary-500"),disabled:r}),t.jsx("div",{className:x("ms-4",{"text-danger-500":o,"text-gray-500":r}),children:t.jsx(p,{})})]}),D=({label:e,checkboxes:i,className:s,onCheckedChanged:r})=>t.jsxs("div",{className:s,children:[e&&t.jsx("p",{className:"pb-2 text-lg font-medium",children:e}),i.map(a=>t.jsx(W,{className:"items-center",onChange:o=>r&&r({...a,checked:o}),Label:()=>t.jsx("span",{className:"-ms-2",children:a.text}),checked:!!a.checked},a.id+a.text))]}),A=({onSearchChange:e,onFilterChange:i,searchString:s,checkBoxes:r})=>{const{t:a}=h();return t.jsxs(v,{innerClassName:"flex flex-col items-center",outerPaddingClassName:"py-4 sm:py-10",children:[t.jsx(M,{disableMargin:!0,className:"mb-3 text-center",children:a("Broker reviews")}),t.jsx("div",{className:"w-5/12 border-b-2 border-primary-500"}),t.jsx(j,{disableMargin:!0,className:"mb-3 mt-3",center:!0,children:a("Find the right broker and invest on your own")}),t.jsx("div",{className:x("w-full max-w-md","flex flex-col items-end gap-x-4"),children:t.jsx(B,{className:"w-full flex-1",value:s,onChange:e,placeholder:a("Type broker name"),label:{text:a("Filter by name"),className:"text-sm ms-2 mb-2 mt-4"},search:!0})}),t.jsx(D,{onCheckedChanged:i,checkboxes:r,className:x("mt-6","grid grid-cols-3 gap-x-10 gap-y-2","sm:flex sm:flex-row sm:gap-x-6")})]})},k=async e=>T.get("/api/review_list",{params:e}).then(i=>i.data),P=()=>{const{state:{filterOptions:e,searchInput:i},setState:s}=c.useContext(b),r=c.useCallback(n=>{s(l=>({...l,isLoading:n}))},[s]),a=c.useCallback(n=>n.filter(l=>l.isSelected).map(l=>l.slug),[]),o=c.useMemo(()=>F(async n=>{r(!0);const l=await k({search:n,filterOptions:a(e)});s(g=>({...g,providers:l.providers})),r(!1);const u=_({searchTerm:n,measurementListId:"review list search"});await y(u)},500),[s,a,e,r]),d=c.useCallback(async n=>{s(l=>({...l,searchInput:n})),o(n)},[o,s]),p=c.useCallback(async n=>{r(!0);let l=!1;const u=e.map(m=>m.slug===n.id?(l=!m.isSelected,{...m,isSelected:!m.isSelected}):m),g=await k({search:i,filterOptions:a(u)});s(m=>({...m,filterOptions:u,providers:g.providers})),r(!1);const f=O({isSelected:l,measurementListId:"review list filter",elementId:n.id});await y(f)},[e,r,s,i,a]);return{onSearchChange:d,onFilterChange:p}},G=()=>{const{t:e}=h(),{state:{providers:i,filterOptions:s,searchInput:r,isLoading:a,currentCountry:o}}=c.useContext(b),{onSearchChange:d,onFilterChange:p}=P();return t.jsx(N,{children:t.jsxs(w,{children:[t.jsx(A,{searchString:r,onSearchChange:d,onFilterChange:p,checkBoxes:s.map(n=>({id:n.slug,checked:n.isSelected,text:n.name}))}),t.jsx(R,{brokers:i,countryInTheName:o==null?void 0:o.translatedInTheCountry,isLoading:a,title:e("Brokers available"),emptyListLabel:e("We couldn't find any brokers based on your search."),outerClassName:"bg-secondary-50 bg-opacity-60",visitBrokerButtonMeasurementListId:"broker-listpage-visit-broker-button",visitBrokerLogoMeasurementListId:"broker-listpage-visit-broker-button-logo",visitBrokerNameLinkMeasurementListId:"broker-listpage-visit-broker-button-name-link",readReviewLinkMeasurementListId:"broker-listpage-read-review-link"})]})})},V=e=>{const{filterOptions:i}=e,[s,r]=c.useState({...e,filterOptions:i.map(o=>({...o,isSelected:!1})),searchInput:""}),a=c.useMemo(()=>({state:s,setState:r}),[s]);return t.jsx(b.Provider,{value:a,children:t.jsx(G,{})})};function We(e){return t.jsx(V,{...e})}export{We as default};
//# sourceMappingURL=BrokerReviewList-DuJlMnmn.js.map
