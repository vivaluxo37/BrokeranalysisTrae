import{j as t,r}from"./Empty-CbVzuLts.js";import{c as v}from"./index-C6HkmSz0.js";import{y as N}from"./index-BwKToVaI.js";import{B as b}from"./Button-DVEZb-KD.js";import{a as g,s as m,J as D,v as E}from"./app-core-DsZLvh-T.js";import{u as I}from"./useBCClientSideData-CaltDZgi.js";import{u as M}from"./useHumanEyeEffect-CrozREcw.js";import{a as L}from"./SaveToWatchlistContextWrapper-CafF4tH5.js";import{D as _}from"./Dialog-Dc9j5dN7.js";import{B}from"./BCLink-C4ZKswFn.js";import{u as f}from"./useTranslation-DBGLPtMT.js";import{F as T}from"./HandThumbUpIcon-DJCoY7Ty.js";import{S as F}from"./dashboardConsts-D2_jkG4e.js";import{F as R}from"./BookmarkIcon-DSzB8aBI.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},s=new e.Error().stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="21fdc2e0-4c16-42c5-a603-b2b09dbee941",e._sentryDebugIdIdentifier="sentry-dbid-21fdc2e0-4c16-42c5-a603-b2b09dbee941")}catch{}{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:bc-frontend":!0})}const S=({children:e,className:s})=>t.jsx("div",{className:v("max-w-xs rounded-lg bg-white p-6 md:max-w-lg",s),children:e}),O=({measurementListId:e,title:s,text:n,icon:a})=>{const{t:i}=f(),l=d=>{const c=g({measurementListId:e,elementId:d});m(c)};return t.jsxs(S,{className:"mx-auto flex flex-col items-center justify-center gap-1",children:[a,t.jsx("div",{className:"text-lg font-semibold",children:s}),t.jsx("div",{className:"text-center",children:n}),t.jsx(b,{href:"/register",onClick:()=>l("sign up"),text:"Sign up",variant:"secondary",className:"bc-link-no-decor mt-4"}),t.jsxs("div",{className:"mt-2 text-sm",children:[i("Already have an account?")," ",t.jsx(B,{href:"/login",onClick:()=>l("log in"),text:"Log in",className:"text-sm",disableTextClassNames:!0})]})]})},P=({showDialog:e,setShowDialog:s,measurementListId:n})=>{const{t:a}=f();return t.jsx(_,{isComponentVisible:e,onDialogClose:()=>s(!1),dialogClasses:"w-full max-w-[500px]",children:t.jsx(O,{title:a("Nice broker pick!"),text:a("We've saved this broker to your shortlist. Create your personal page to access it and receive updates."),icon:t.jsx(T,{className:"mb-4 h-14 w-14 rounded-full bg-slate-100 p-2 text-secondary-500"}),measurementListId:n})})},G=({measurementListId:e,messageText:s})=>{const{t:n}=f(),a=()=>{const i=g({measurementListId:e});m(i)};return t.jsxs("div",{children:[s," ",t.jsx("a",{href:`/personal-page#${F}`,className:"underline",onClick:a,children:n("shortlist")})]})},ee=({brokerId:e,onSaveSuccess:s,brokerName:n})=>{const{t:a}=f(),{savedProviderIds:i,saveProvider:l}=r.useContext(L),{user:d}=I(),[c,u]=r.useState(!1),[y,p]=r.useState(!1),o=r.useMemo(()=>i.indexOf(e)>-1,[i,e]),h=r.useCallback(async()=>{!d&&!o&&p(!0),u(!0);try{await l(e,o);const x=g({measurementListId:"review save broker button",elementId:`${e}`,context:o?"unsave":"save"});m(x),d&&N(t.jsx(G,{measurementListId:o?"unsave broker toast message shortlist link":"Save broker toast message shortlist link",messageText:o?a("[brokerName] removed from",{brokerName:n}):a("[brokerName] added to",{brokerName:n})}))}finally{s==null||s(),u(!1)}},[c,e,o,u,D]),w=r.useCallback(()=>{const x=E({measurementListId:"saved providers",elementId:"review save button"});m(x)},[]),j=M(w),k=r.useCallback(()=>t.jsx(R,{className:v("me-2 h-5 w-5 self-center text-secondary-500",o&&"fill-secondary-500")}),[o]),C=a(o?"saved to shortlist":"save to shortlist");return t.jsxs("div",{className:"flex w-full items-center justify-center",translate:"no",children:[t.jsx("div",{ref:j,className:"flex flex-col items-center",children:t.jsx(b,{size:"medium",variant:"borderless-text-button",className:"w-full font-semibold",text:C,onClick:h,IconLeft:k,isLoading:c})}),t.jsx(P,{showDialog:y,setShowDialog:p,measurementListId:"watchlist not registered dialog"})]})};export{ee as S};
//# sourceMappingURL=SaveFavoriteBrokerButton-CclnIbHO.js.map
