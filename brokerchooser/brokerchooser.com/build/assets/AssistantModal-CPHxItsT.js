import{r as n,j as e}from"./Empty-CbVzuLts.js";import{c as f}from"./index-C6HkmSz0.js";import{B as se}from"./Breakpoints-DrIi2fE3.js";import{D as te}from"./Dialog-Dc9j5dN7.js";import{i as F,j as Me,M as Ae,a as y,u as x,s as k,k as b,r as Ee,C as Te,l as M,h as Le,m as ae,O as Re,W as Fe}from"./app-core-DsZLvh-T.js";import{u as D}from"./useIsMobile-BtllGVl0.js";import{u as ne}from"./useIsRtl-CrjScdAD.js";import{u as H}from"./useUserHandling-aMiDhUow.js";import{B as p}from"./ButtonOrLink-BXF_cz5f.js";import{u as N,A as _e,a as le,b as K,c as ze,d as Be,e as Oe,f as Pe,g as De,h as O,i as He,j as P,k as Q}from"./useAssistantInteractions-KyZyfcCI.js";import{u as g}from"./useTranslation-DBGLPtMT.js";import{F as _}from"./XMarkIcon-zYCpwGN2.js";import{P as Ue}from"./PaginationBullets-B6Z_h8yO.js";import{C as Ze}from"./Carousel-zS4unymT.js";import{F as ie}from"./CheckIcon-BjmXxs8S.js";import{B as U}from"./Badge-OjVc2uIR.js";import{T as A}from"./TrackedButtonOrLink-CLY2ep4D.js";import{I as E}from"./Image-Cq_3T_IK.js";import{G as re,F as Ve}from"./FacebookIcon-DzRyVQeT.js";import{F as oe}from"./EnvelopeIcon-BdMPQndR.js";import{T as ce}from"./Trans-BnbQ44YL.js";import{F as de}from"./ChevronLeftIcon-D59Tnevw.js";import{T as me,F as ue,u as We,S as Ge,a as L,f as T,A as $e}from"./SuggestedQueries-DYbx2lHi.js";import{T as R}from"./Tooltip-CIocoLkE.js";import{N as Ke,M as Qe}from"./MarkdownText-CDJp3RWO.js";import{F as Ye}from"./PlusIcon-CNrPsgPO.js";import{t as qe}from"./take-CE8R96Hl.js";import{F as Xe}from"./ChevronDownIcon-CRZXCply.js";import{I as Y}from"./ImageAsBackground-BYbnEpTG.js";import{F as xe}from"./SparklesIcon-Ci394G6j.js";import{T as Je}from"./TrackedLink-1iyBTBwp.js";import{i as he}from"./getAbTests-sg48PVrR.js";import{F as es}from"./HandThumbUpIcon-DJCoY7Ty.js";import{F as ss}from"./ExclamationCircleIcon-CJTVlUmb.js";import"./floating-ui.react-CDjzeHtS.js";import"./floating-ui.dom-cvZeYP3P.js";import"./index-B_BLzt9w.js";import"./preload-helper-9zrlRb12.js";import"./_baseIsEqual-BU7ud4ak.js";import"./registrationModalLocalStorageId-NLzc7oHj.js";import"./useBCClientSideData-CaltDZgi.js";import"./ArrowRightIcon-BPHA_4Zr.js";import"./utils-B1GDy_RR.js";import"./useMeasureImpression-Crl5RCea.js";import"./useHumanEyeEffect-CrozREcw.js";import"./isEqual-jqLKjBFs.js";import"./Input-CqPMj87y.js";import"./toInteger-CS9P9IFt.js";import"./toFinite-DAHqaayj.js";import"./Link-B-974YU8.js";try{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new s.Error().stack;t&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[t]="27b4b404-df73-489c-a40d-e89c73f6f165",s._sentryDebugIdIdentifier="sentry-dbid-27b4b404-df73-489c-a40d-e89c73f6f165")}catch{}{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};s._sentryModuleMetadata=s._sentryModuleMetadata||{},s._sentryModuleMetadata[new s.Error().stack]=Object.assign({},s._sentryModuleMetadata[new s.Error().stack],{"_sentryBundlerPluginAppKey:bc-frontend":!0})}function ts({title:s,titleId:t,...a},l){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?n.createElement("title",{id:t},s):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const as=n.forwardRef(ts);function ns({title:s,titleId:t,...a},l){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?n.createElement("title",{id:t},s):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.498 15.25H4.372c-1.026 0-1.945-.694-2.054-1.715a12.137 12.137 0 0 1-.068-1.285c0-2.848.992-5.464 2.649-7.521C5.287 4.247 5.886 4 6.504 4h4.016a4.5 4.5 0 0 1 1.423.23l3.114 1.04a4.5 4.5 0 0 0 1.423.23h1.294M7.498 15.25c.618 0 .991.724.725 1.282A7.471 7.471 0 0 0 7.5 19.75 2.25 2.25 0 0 0 9.75 22a.75.75 0 0 0 .75-.75v-.633c0-.573.11-1.14.322-1.672.304-.76.93-1.33 1.653-1.715a9.04 9.04 0 0 0 2.86-2.4c.498-.634 1.226-1.08 2.032-1.08h.384m-10.253 1.5H9.7m8.075-9.75c.01.05.027.1.05.148.593 1.2.925 2.55.925 3.977 0 1.487-.36 2.89-.999 4.125m.023-8.25c-.076-.365.183-.75.575-.75h.908c.889 0 1.713.518 1.972 1.368.339 1.11.521 2.287.521 3.507 0 1.553-.295 3.036-.831 4.398-.306.774-1.086 1.227-1.918 1.227h-1.053c-.472 0-.745-.556-.5-.96a8.95 8.95 0 0 0 .303-.54"}))}const ls=n.forwardRef(ns);function is({title:s,titleId:t,...a},l){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?n.createElement("title",{id:t},s):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6.878V6a2.25 2.25 0 0 1 2.25-2.25h7.5A2.25 2.25 0 0 1 18 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 0 0 4.5 9v.878m13.5-3A2.25 2.25 0 0 1 19.5 9v.878m0 0a2.246 2.246 0 0 0-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0 1 21 12v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6c0-.98.626-1.813 1.5-2.122"}))}const rs=n.forwardRef(is);function os({title:s,titleId:t,...a},l){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?n.createElement("title",{id:t},s):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3 3 8.735 8.735m0 0a.374.374 0 1 1 .53.53m-.53-.53.53.53m0 0L21 21M14.652 9.348a3.75 3.75 0 0 1 0 5.304m2.121-7.425a6.75 6.75 0 0 1 0 9.546m2.121-11.667c3.808 3.807 3.808 9.98 0 13.788m-9.546-4.242a3.733 3.733 0 0 1-1.06-2.122m-1.061 4.243a6.75 6.75 0 0 1-1.625-6.929m-.496 9.05c-3.068-3.067-3.664-7.67-1.79-11.334M12 12h.008v.008H12V12Z"}))}const cs=n.forwardRef(os);function ds({title:s,titleId:t,...a},l){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?n.createElement("title",{id:t},s):null,n.createElement("path",{fillRule:"evenodd",d:"M2 8a.75.75 0 0 1 .75-.75h8.69L8.22 4.03a.75.75 0 0 1 1.06-1.06l4.5 4.5a.75.75 0 0 1 0 1.06l-4.5 4.5a.75.75 0 0 1-1.06-1.06l3.22-3.22H2.75A.75.75 0 0 1 2 8Z",clipRule:"evenodd"}))}const ms=n.forwardRef(ds),Z=({counter:s,className:t})=>e.jsx("div",{className:f("flex size-5 items-center justify-center rounded-full bg-danger-700 text-xs text-white md:size-6",t),children:s}),us=({className:s})=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:s,children:e.jsx("path",{d:"M6.63636 7.60045L13.6543 14.6184C13.7172 14.6835 13.7924 14.7355 13.8756 14.7712C13.9588 14.8069 14.0483 14.8257 14.1388 14.8265C14.2293 14.8273 14.3191 14.8101 14.4029 14.7758C14.4867 14.7415 14.5628 14.6909 14.6269 14.6269C14.6909 14.5628 14.7415 14.4867 14.7758 14.4029C14.8101 14.3191 14.8273 14.2293 14.8265 14.1388C14.8257 14.0483 14.8069 13.9588 14.7712 13.8756C14.7355 13.7924 14.6835 13.7172 14.6184 13.6543L7.60045 6.63636H9.36364C9.54447 6.63636 9.71789 6.56453 9.84576 6.43666C9.97362 6.3088 10.0455 6.13537 10.0455 5.95455C10.0455 5.77372 9.97362 5.60029 9.84576 5.47243C9.71789 5.34456 9.54447 5.27273 9.36364 5.27273H5.95455C5.77372 5.27273 5.60029 5.34456 5.47243 5.47243C5.34456 5.60029 5.27273 5.77372 5.27273 5.95455V9.36364C5.27273 9.54447 5.34456 9.71789 5.47243 9.84575C5.60029 9.97362 5.77372 10.0455 5.95455 10.0455C6.13538 10.0455 6.3088 9.97362 6.43666 9.84575C6.56453 9.71789 6.63636 9.54447 6.63636 9.36364V7.60045ZM14.8182 8.68182C14.6374 8.68182 14.4639 8.60998 14.3361 8.48212C14.2082 8.35425 14.1364 8.18083 14.1364 8V2.54545C14.1364 2.36462 14.0645 2.1912 13.9367 2.06334C13.8088 1.93547 13.6354 1.86364 13.4545 1.86364H2.54545C2.36463 1.86364 2.1912 1.93547 2.06334 2.06334C1.93547 2.1912 1.86364 2.36462 1.86364 2.54545V13.4545C1.86364 13.6354 1.93547 13.8088 2.06334 13.9367C2.1912 14.0645 2.36463 14.1364 2.54545 14.1364H8C8.18083 14.1364 8.35425 14.2082 8.48212 14.3361C8.60998 14.4639 8.68182 14.6374 8.68182 14.8182C8.68182 14.999 8.60998 15.1724 8.48212 15.3003C8.35425 15.4282 8.18083 15.5 8 15.5H2.54545C2.00297 15.5 1.4827 15.2845 1.0991 14.9009C0.715503 14.5173 0.5 13.997 0.5 13.4545V2.54545C0.5 2.00297 0.715503 1.4827 1.0991 1.0991C1.4827 0.715502 2.00297 0.5 2.54545 0.5H13.4545C13.997 0.5 14.5173 0.715502 14.9009 1.0991C15.2845 1.4827 15.5 2.00297 15.5 2.54545V8C15.5 8.18083 15.4282 8.35425 15.3003 8.48212C15.1724 8.60998 14.999 8.68182 14.8182 8.68182Z",fill:"white"})}),fe=()=>n.useMemo(()=>F()||!!!document.querySelector(".bc_mobile_bottom_popup")?"bottom-4":!!document.querySelector(".bc_mobile_bottom_popup .bc-cta-cfd-warning")?"bottom-24":"bottom-16",[]),xs=({totalUnreadMessages:s})=>{const{t}=g(),{onOpen:a,onClose:l}=N(),r=fe(),i=n.useMemo(()=>Me(Ae),[]),o=n.useCallback(()=>{const c=y({measurementListId:_e,elementId:le});a(void 0,c)},[a]);return i===null?null:e.jsxs("div",{className:f(r,"fixed end-4 z-50 flex w-full max-w-72 gap-x-2 md:max-w-xs rtl:flex-row"),children:[e.jsx(p,{text:"",variant:"tertiary",className:"size-8 shrink-0 bg-white drop-shadow-md",onClick:l,children:e.jsx(_,{className:"size-4 stroke-slate-950"})}),e.jsxs("button",{type:"button",onClick:o,className:"flex w-full flex-col gap-y-2 overflow-clip rounded-lg bg-white shadow-md",children:[e.jsxs("div",{className:"flex w-full items-center justify-between bg-nuri-gradient",children:[e.jsx("span",{className:"px-2 text-xs font-semibold leading-none text-white",children:"Nuri AI"}),e.jsx(us,{className:"m-2 size-4 rtl:scale-x-[-1]"})]}),e.jsxs("div",{className:"flex flex-col gap-y-1 px-2 pb-2 text-start leading-3.5",children:[e.jsx("span",{className:"text-2xs font-normal text-slate-500",children:t("Last topic")}),e.jsx("p",{className:"line-clamp-2 text-xs font-normal text-slate-950",children:i})]}),s>0&&e.jsx(Z,{counter:s,className:"absolute -end-2 -top-2"})]})]})},pe=({className:s,list:t})=>e.jsx("div",{className:f("flex flex-col gap-2",s),children:t.map(a=>e.jsxs("div",{className:"flex items-center gap-2 text-base font-normal text-slate-950 md:text-lg",children:[e.jsx(ie,{className:"size-6"}),a]},a))}),ge=({children:s,className:t})=>e.jsx("div",{className:f("flex min-w-80 max-w-96 flex-col gap-4 rounded-xl p-6 md:gap-6 md:p-8",t),children:s}),q=({className:s})=>{const{t}=g(),a=n.useMemo(()=>[t("Unlimited AI chats"),t("AI-Powered broker match"),t("Broker comparison")],[t]);return e.jsxs(ge,{className:f("my-8 border border-slate-300",s),children:[e.jsx("div",{className:"h-6"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-xl font-semibold text-slate-950 md:text-2xl",children:["Nuri AI Lite"," ",e.jsxs("span",{className:"text-lg font-normal text-slate-500",children:["- ",t("Your current plan")]})]}),e.jsxs("div",{className:"mt-4 flex gap-2 text-base font-medium text-slate-950 md:mt-9 md:text-xl",children:[e.jsx("span",{children:"$0"}),e.jsx("span",{children:t("Free for lifetime")})]}),e.jsx("div",{className:"mt-4 text-lg font-normal text-slate-950",children:t("Get free, unlimited access to Nuri AI for fast and reliable financial guidance")}),e.jsx("div",{className:"flex flex-col gap-2 py-6 md:py-12",children:e.jsx(pe,{list:a,className:"py-6 md:py-12"})})]})]})},Ce=()=>e.jsx(U,{text:"PLUS",className:"self-start bg-nuri-gradient text-white"}),X=({className:s})=>{const{t}=g(),a=n.useMemo(()=>[t("Everything in Nuri Lite"),t("Saved past conversations"),t("Suggestions based on user history"),t("Personalized AI responses"),t("Early beta access")],[t]);return e.jsxs(ge,{className:f("max-w-[480px] bg-white shadow-lg",s),children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("div",{className:"rounded bg-primary-400 px-2 py-1 text-base font-semibold",children:t("Limited time offer")})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex gap-1 text-xl font-semibold text-slate-950 md:text-2xl",children:["Nuri AI",e.jsx(Ce,{})]}),e.jsxs("div",{className:"mt-4 gap-2 self-baseline text-base md:mt-9 md:text-xl",children:[e.jsxs("span",{className:"self-baseline text-3xl font-medium text-emerald-600",children:["$0 ",t("Free")," "]}),t("with registration")]}),e.jsx("div",{className:"mt-4 text-lg font-normal text-slate-950",children:t("Register now and get personalized AI-powered insights for free.")}),e.jsxs("div",{className:"mt-4 flex flex-col gap-3",children:[e.jsxs(A,{measurementListId:K,text:"register with google",variant:"monochrome",size:"sm",className:"w-full",bodyClassName:"items-center flex gap-1 py-1",href:"/auth/google/redirect",children:[e.jsx(E,{imageSrc:re,alt:"Google icon",className:"size-5"}),e.jsx("span",{className:"font-normal",children:t("Register with Google (Free)")})]}),e.jsxs(A,{measurementListId:K,text:"register with email",size:"sm",variant:"stroke",className:"w-full",bodyClassName:"items-center flex gap-1 py-1",href:"/register",children:[e.jsx(oe,{className:"size-5"}),e.jsx("span",{className:"font-normal",children:t("Register with Email (Free)")})]}),e.jsx("div",{className:"w-full text-center text-xs",children:e.jsxs(ce,{i18nKey:"By signing up, you agree with our <1>Privacy Policy</1>.",children:["By signing up, you agree with our ",e.jsx("a",{href:"https://www.iubenda.com/privacy-policy/8253309/full-legal",target:"_blank",rel:"nofollow",className:"underline",children:"Privacy Policy"}),"."]})})]}),e.jsx(pe,{list:a,className:"py-6 md:py-12"}),e.jsx("p",{className:"text-lg font-normal text-slate-950",children:t("Smarter investing starts here ðŸš€")})]})]})},hs=({isOpen:s,onDialogClose:t})=>{const{t:a}=g(),l=D(se.md),r=n.useRef(null),[i,o]=n.useState(0),c=ne(),u=n.useCallback(d=>{if(c){o(2-d-1);return}o(d)},[c]);return e.jsx(te,{isComponentVisible:s,onDialogClose:t,children:e.jsxs("div",{className:"h-screen w-screen overflow-y-auto bg-gradient-to-br from-[#e5f5ff] to-[#fff4dc] backdrop-blur-[30px] md:flex md:flex-col md:py-7",children:[e.jsx(p,{size:l?"sm":"md",variant:"stroke",text:"close",className:"ms-4 mt-4 !px-0 md:absolute md:ms-12 md:mt-2",bodyClassName:"!px-2 md:!px-3",onClick:t,children:e.jsx(de,{className:"size-5"})}),e.jsxs("div",{className:"m-auto flex flex-col",children:[e.jsxs("div",{className:"mx-auto flex gap-1",children:[e.jsx("p",{className:"text-center text-3xl font-medium text-slate-950 md:text-5xl",children:a("Upgrade to Nuri AI")}),e.jsx(Ce,{})]}),e.jsx("div",{className:"mt-8 md:mt-16",children:l?e.jsxs(Ze,{ref:r,options:{align:"start",startIndex:c?1:0},onScrollEnd:u,className:"w-screen pb-5",children:[e.jsx(X,{className:"ms-4 flex-[0_0_85%] rtl:me-4"}),e.jsx(q,{className:"me-4 flex-[0_0_85%] rtl:ms-4"})]}):e.jsxs("div",{className:"flex justify-center gap-14 lg:gap-20",children:[e.jsx(q,{}),e.jsx(X,{})]})}),l&&e.jsx("div",{className:"my-8 flex w-screen justify-center",children:e.jsx(Ue,{currentIndex:i,numberOfItems:2,bgColorClass:"bg-slate-800",bulletSize:12})})]})]})})},V=({className:s})=>{const t=n.useId();return e.jsxs("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:s,children:[e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.875 5.1875C10.2238 5.1875 10.5304 5.41873 10.6262 5.75412L11.4733 8.71891C11.844 10.0166 12.8584 11.031 14.1561 11.4017L17.1209 12.2488C17.4563 12.3446 17.6875 12.6512 17.6875 13C17.6875 13.3488 17.4563 13.6554 17.1209 13.7512L14.1561 14.5983C12.8584 14.969 11.844 15.9834 11.4733 17.2811L10.6262 20.2459C10.5304 20.5813 10.2238 20.8125 9.875 20.8125C9.52619 20.8125 9.21964 20.5813 9.12381 20.2459L8.27673 17.2811C7.90596 15.9834 6.89159 14.969 5.5939 14.5983L2.62912 13.7512C2.29373 13.6554 2.0625 13.3488 2.0625 13C2.0625 12.6512 2.29373 12.3446 2.62912 12.2488L5.59391 11.4017C6.89159 11.031 7.90596 10.0166 8.27673 8.7189L9.12381 5.75412C9.21964 5.41873 9.52619 5.1875 9.875 5.1875Z",fill:`url(#paint0_linear_3035_13719${t})`}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.25 2.0625C19.6085 2.0625 19.921 2.30648 20.0079 2.65427L20.2776 3.73287C20.5225 4.71256 21.2874 5.4775 22.2671 5.72242L23.3457 5.99208C23.6935 6.07902 23.9375 6.39151 23.9375 6.75C23.9375 7.10849 23.6935 7.42098 23.3457 7.50792L22.2671 7.77758C21.2874 8.0225 20.5225 8.78744 20.2776 9.76712L20.0079 10.8457C19.921 11.1935 19.6085 11.4375 19.25 11.4375C18.8915 11.4375 18.579 11.1935 18.4921 10.8457L18.2224 9.76713C17.9775 8.78744 17.2126 8.0225 16.2329 7.77758L15.1543 7.50792C14.8065 7.42098 14.5625 7.10849 14.5625 6.75C14.5625 6.39151 14.8065 6.07902 15.1543 5.99208L16.2329 5.72242C17.2126 5.4775 17.9775 4.71256 18.2224 3.73288L18.4921 2.65427C18.579 2.30648 18.8915 2.0625 19.25 2.0625Z",fill:`url(#paint1_linear_3035_13719${t})`}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.6875 16.125C18.0238 16.125 18.3223 16.3402 18.4287 16.6592L18.8393 17.8912C18.9949 18.3578 19.361 18.7239 19.8275 18.8794L21.0596 19.2901C21.3786 19.3964 21.5938 19.695 21.5938 20.0312C21.5938 20.3675 21.3786 20.6661 21.0596 20.7724L19.8275 21.1831C19.361 21.3386 18.9949 21.7047 18.8393 22.1713L18.4287 23.4033C18.3223 23.7223 18.0238 23.9375 17.6875 23.9375C17.3512 23.9375 17.0527 23.7223 16.9463 23.4033L16.5357 22.1713C16.3801 21.7047 16.014 21.3386 15.5475 21.1831L14.3154 20.7724C13.9964 20.6661 13.7812 20.3675 13.7812 20.0312C13.7812 19.695 13.9964 19.3964 14.3154 19.2901L15.5475 18.8794C16.014 18.7239 16.3801 18.3578 16.5357 17.8912L16.9463 16.6592C17.0527 16.3402 17.3512 16.125 17.6875 16.125Z",fill:`url(#paint2_linear_3035_13719${t})`}),e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:`paint0_linear_3035_13719${t}`,x1:"2.0625",y1:"23.9375",x2:"24.2793",y2:"2.0625",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{stopColor:"#0928FF"}),e.jsx("stop",{offset:"1",stopColor:"#FDAD00"})]}),e.jsxs("linearGradient",{id:`paint1_linear_3035_13719${t}`,x1:"2.0625",y1:"23.9375",x2:"24.2793",y2:"2.0625",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{stopColor:"#0928FF"}),e.jsx("stop",{offset:"1",stopColor:"#FDAD00"})]}),e.jsxs("linearGradient",{id:`paint2_linear_3035_13719${t}`,x1:"2.0625",y1:"23.9375",x2:"24.2793",y2:"2.0625",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{stopColor:"#0928FF"}),e.jsx("stop",{offset:"1",stopColor:"#FDAD00"})]})]})]})},fs=({onClose:s})=>{const t=x(r=>r.assistant.chat.actions.handleOpenPlanRegistrationPushButtonClick),a=n.useCallback(()=>{const r=y({measurementListId:"assistant landing view plan registration push"});k(r),t()},[t]),l=x(r=>r.assistant.common.view);return l!==b.NEW_CHAT&&l!==b.CHAT?null:e.jsx(p,{text:"nuri plans",variant:"tertiary",className:"mb-4 !p-0 focus:rounded-sm focus:outline-blue-800",bodyClassName:"!p-0 !text-start w-full",onClick:a,children:e.jsxs("div",{className:"relative flex items-center gap-2 bg-blue-500 px-4 py-2 lg:hidden",children:[e.jsx("div",{className:"animate absolute left-0 z-10 h-full w-full animate-assistant-promo-strip-ping rounded-sm bg-blue-500 opacity-75"}),e.jsx("div",{className:"z-10 flex rounded-lg bg-white p-2",children:e.jsx(V,{className:"m-auto size-6"})}),e.jsx("div",{className:"z-10 text-sm font-semibold text-white",children:e.jsxs(ce,{i18nKey:"Unlock <1>Nuri Plus</1> - Get Personalized Insights for FREE!",children:["Unlock ",e.jsx("span",{className:"underline",children:"Nuri Plus"})," - Get Personalized Insights for FREE!"]})}),e.jsx(_,{className:"z-10 ms-auto size-10 rounded-md p-3 text-white hover:bg-blue-400",onClick:r=>{r.stopPropagation(),s()}})]})})},ps="/build/assets/nuri-chat-bubble-icon-B9YWbhJD.svg",be=()=>{const s=x(i=>i.assistant.common.view),{onOpen:t}=N(),a=fe(),l=n.useMemo(()=>s!==b.CLOSED,[s]),r=n.useCallback(async()=>{const i=y({measurementListId:ze,elementId:le,context:Be});await t(void 0,i)},[t]);return{bottomOffsetClassName:a,onClick:r,shouldHide:l}},we=({initialNrOfUnreadMessages:s})=>{const t=x(l=>l.assistant.chat.threads);return{totalUnreadMessages:n.useMemo(()=>t.length===0?s:t.reduce((l,{nrOfUnreadMessages:r})=>l+r,0),[s,t])}},gs=({totalUnreadMessages:s})=>{const{bottomOffsetClassName:t,onClick:a}=be(),{totalUnreadMessages:l}=we({initialNrOfUnreadMessages:s});return e.jsx("div",{className:f("fixed end-5 z-50 mx-auto w-fit",t),children:e.jsxs("button",{type:"button","aria-label":"open-chat",onClick:a,className:"drop-shadow-md",children:[l>0&&e.jsx(Z,{counter:l||1,className:"absolute -end-2 -top-2"}),e.jsx(E,{imageSrc:ps,alt:"nuri",className:"size-12 sm:size-16",style:{borderRadius:"8px"}}),e.jsx("div",{className:"absolute bottom-0 start-0 size-3 rounded-full border border-white bg-emerald-500"})]})})},Cs=({children:s})=>e.jsx("div",{className:"absolute inset-0 flex size-full flex-col justify-between",children:s}),bs=()=>{const{t:s}=g(),t=x(c=>c.assistant.chat.actions.handleOpenPlanRegistrationPushButtonClick),a=x(c=>c.assistant.chat.isFirstTimeOpeningModal),l=D(),[r]=n.useState(a),[i,o]=n.useState(a);return n.useEffect(()=>{const c=setTimeout(()=>{o(!1)},3e3);return()=>clearTimeout(c)},[]),e.jsx(R,{position:"top",className:f("mt-auto w-full",{"animate-fade":r&&!l,hidden:i&&!l}),content:s("Register for free and get personalized AI responses."),children:e.jsxs(A,{text:"get nuri plus",onClick:t,variant:"secondary",measurementListId:"assistant header plan registration push",className:"relative w-full !justify-start !p-1",bodyClassName:"!px-0 flex items-center gap-2 text-sm font-semibold",children:[e.jsx("div",{className:"absolute left-0 h-full w-full animate-assistant-promo-button-ping rounded-lg bg-blue-500 opacity-75"}),e.jsx("div",{className:"z-10 flex size-14 shrink-0 rounded-md bg-white",children:e.jsx(V,{className:"m-auto size-9"})}),e.jsx("span",{className:"z-10 text-wrap text-start",children:s("Unlock [planName] â€“ Get Personalized Insights for FREE!",{planName:"Nuri Plus"})})]})})},ve=({className:s})=>{const{user:t}=H();return e.jsxs("div",{className:f("flex items-center gap-x-2",s),children:[t?e.jsx("div",{className:"flex size-10 rounded-lg bg-slate-100",children:e.jsx(V,{className:"m-auto size-6"})}):e.jsx(E,{loading:"eager",imageSrc:Ke,alt:"nuri",className:"m-[6px] size-[39px] shrink-0 overflow-clip rounded"}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-x-1",children:[e.jsxs("div",{className:"text-nowrap text-2xl font-medium leading-6",children:["Nuri AI",t&&" Plus"]}),e.jsx(U,{text:"BETA",className:"align-center h-max rounded-full border border-slate-200 bg-transparent !py-0 text-black"})]})})]})},ws=({className:s})=>e.jsx("svg",{width:"18",className:s,height:"18",viewBox:"0 0 18 18",fill:"#020617",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 2.125C5.20304 2.125 2.125 5.20304 2.125 9C2.125 12.797 5.20304 15.875 9 15.875C12.797 15.875 15.875 12.797 15.875 9C15.875 5.20304 12.797 2.125 9 2.125ZM0.875 9C0.875 4.51269 4.51269 0.875 9 0.875C13.4873 0.875 17.125 4.51269 17.125 9C17.125 13.4873 13.4873 17.125 9 17.125C4.51269 17.125 0.875 13.4873 0.875 9ZM9.83333 9C9.83333 9.46024 9.46024 9.83333 9 9.83333C8.53976 9.83333 8.16667 9.46024 8.16667 9C8.16667 8.53976 8.53976 8.16667 9 8.16667C9.46024 8.16667 9.83333 8.53976 9.83333 9ZM8.33053 7.92628L11.2515 5.10011L10.2645 9.04287C10.1663 9.43536 9.96006 9.7925 9.66928 10.0738L6.74827 12.9L7.7353 8.95725C7.83356 8.56476 8.03975 8.20762 8.33053 7.92628ZM11.3963 9.32619L12.4359 5.1733C12.5557 4.6948 12.3438 4.19488 11.9166 3.94825C11.4894 3.70161 10.9505 3.76805 10.596 4.11103L7.5193 7.08783C7.07195 7.52066 6.75472 8.0701 6.60356 8.67393L5.56392 12.8268C5.44414 13.3053 5.65606 13.8052 6.08324 14.0519C6.51042 14.2985 7.04933 14.2321 7.40383 13.8891L10.4805 10.9123C10.9279 10.4795 11.2451 9.93002 11.3963 9.32619Z"})});function vs({title:s,titleId:t,...a},l){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),s?n.createElement("title",{id:t},s):null,n.createElement("path",{fillRule:"evenodd",d:"M3 9a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 9Zm0 6.75a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"}))}const js=n.forwardRef(vs),Ns=({className:s})=>e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:s,children:e.jsx("path",{d:"M10.8636 9.89955L3.84568 2.88159C3.78279 2.81647 3.70755 2.76453 3.62437 2.72879C3.54118 2.69306 3.45171 2.67425 3.36118 2.67347C3.27065 2.67268 3.18087 2.68993 3.09708 2.72421C3.01328 2.75849 2.93716 2.80912 2.87314 2.87314C2.80912 2.93716 2.75849 3.01328 2.72421 3.09708C2.68993 3.18087 2.67268 3.27065 2.67346 3.36118C2.67425 3.45171 2.69306 3.54118 2.7288 3.62437C2.76453 3.70755 2.81647 3.78279 2.88159 3.84568L9.89955 10.8636H8.13636C7.95553 10.8636 7.78211 10.9355 7.65424 11.0633C7.52638 11.1912 7.45455 11.3646 7.45455 11.5455C7.45455 11.7263 7.52638 11.8997 7.65424 12.0276C7.78211 12.1554 7.95553 12.2273 8.13636 12.2273H11.5455C11.7263 12.2273 11.8997 12.1554 12.0276 12.0276C12.1554 11.8997 12.2273 11.7263 12.2273 11.5455V8.13636C12.2273 7.95553 12.1554 7.78211 12.0276 7.65425C11.8997 7.52638 11.7263 7.45455 11.5455 7.45455C11.3646 7.45455 11.1912 7.52638 11.0633 7.65425C10.9355 7.78211 10.8636 7.95553 10.8636 8.13636V9.89955ZM2.68182 8.81818C2.86265 8.81818 3.03607 8.89002 3.16394 9.01788C3.2918 9.14575 3.36364 9.31917 3.36364 9.5V14.9545C3.36364 15.1354 3.43547 15.3088 3.56334 15.4367C3.6912 15.5645 3.86462 15.6364 4.04545 15.6364H14.9545C15.1354 15.6364 15.3088 15.5645 15.4367 15.4367C15.5645 15.3088 15.6364 15.1354 15.6364 14.9545V4.04545C15.6364 3.86463 15.5645 3.6912 15.4367 3.56334C15.3088 3.43547 15.1354 3.36364 14.9545 3.36364H9.5C9.31917 3.36364 9.14575 3.2918 9.01788 3.16394C8.89002 3.03607 8.81818 2.86265 8.81818 2.68182C8.81818 2.50099 8.89002 2.32757 9.01788 2.1997C9.14575 2.07183 9.31917 2 9.5 2H14.9545C15.497 2 16.0173 2.2155 16.4009 2.5991C16.7845 2.9827 17 3.50297 17 4.04545V14.9545C17 15.497 16.7845 16.0173 16.4009 16.4009C16.0173 16.7845 15.497 17 14.9545 17H4.04545C3.50297 17 2.9827 16.7845 2.5991 16.4009C2.2155 16.0173 2 15.497 2 14.9545V9.5C2 9.31917 2.07183 9.14575 2.1997 9.01788C2.32757 8.89002 2.50099 8.81818 2.68182 8.81818Z",fill:"#020617"})}),W=({className:s})=>{const{onMinimize:t}=N(),{t:a}=g();return e.jsx(R,{content:a("Minimize chat"),trackingProps:{measurementListId:"assistant close icon tooltip"},children:e.jsx(p,{text:"Minimize",mode:"light",variant:"tertiary",className:f("bg-white !p-3.5",s),bodyClassName:"!p-0",onClick:t,children:e.jsx(Ns,{className:"size-5 shrink-0 rtl:scale-x-[-1]"})})})},je=({onClick:s,Icon:t,className:a,totalUnreadMessages:l})=>e.jsxs("div",{className:f("flex items-center justify-between p-4 lg:hidden",a),children:[e.jsxs(p,{text:"Close",variant:"tertiary",className:"relative bg-white",bodyClassName:"!px-0",onClick:s,children:[t?e.jsx(t,{className:"size-5"}):e.jsx(js,{className:"size-5"}),l>0&&e.jsx(Z,{counter:l,className:"absolute -end-2 -top-2"})]}),e.jsx(ve,{}),e.jsx(W,{})]}),ys=({thread:s,onClick:t})=>{const a=x(i=>i.assistant.chat.currentThreadId),l=x(i=>i.assistant.common.isGenerating),r=n.useCallback(()=>{t(s.id)},[t,s.id]);return e.jsxs("button",{type:"button",className:"group flex w-full max-w-full items-center justify-between gap-x-2 overflow-hidden rounded-lg pe-1 transition-colors duration-300 hover:bg-blue-50",disabled:a===s.id||l,onClick:r,children:[e.jsx("p",{className:f("font-regular flex-1 shrink-0 cursor-pointer truncate p-2 text-start transition-colors duration-300 group-hover:text-blue-500",{"text-blue-500":s.id===a}),children:s.title}),s.nrOfUnreadMessages>0&&e.jsx(U,{text:`${s.nrOfUnreadMessages}`,variant:"stroke"})]},s.id)},ks=({threads:s,onThreadItemClick:t,title:a,Icon:l,className:r})=>e.jsxs("div",{className:f("flex flex-col gap-y-2 overflow-hidden",r),children:[e.jsxs("div",{className:"flex items-center gap-x-1 font-semibold",children:[e.jsx(l,{className:"size-6 stroke-slate-500"}),e.jsx("p",{className:"text-sm text-slate-500",children:a})]}),e.jsx("div",{className:"min-h-12 overflow-auto overscroll-none",children:s.map(i=>e.jsx(ys,{thread:i,onClick:t},i.id))})]}),Ss=({onHamburgerButtonClick:s,totalUnreadMessages:t})=>{const{t:a}=g(),{user:l}=H(),{onOpen:r,onOpenWithNewChat:i,onDiscoverClick:o}=N(),c=x(d=>d.assistant.chat.threads),u=x(d=>d.assistant.common.view);return e.jsxs("div",{className:"flex size-full flex-col rounded-3xl bg-white p-4 lg:p-8",children:[e.jsx(ve,{className:"hidden lg:flex"}),e.jsx(je,{totalUnreadMessages:t,onClick:s,Icon:_,className:"!p-0"}),e.jsx("p",{className:"mt-3 text-sm text-slate-500",children:a("Meet Nuri, your AI guide to investing. Backed by BrokerChooserâ€™s trusted expertise, Nuri uses advanced AI to provide personalized help and answers.")}),e.jsx(R,{content:a("Start a new blank chat in Nuri"),position:"top",className:"mt-6",trackingProps:{measurementListId:"assistant header new chat tooltip"},children:e.jsx(p,{text:a("New chat"),IconLeft:Ye,iconClassName:"size-5",disabled:u===b.NEW_CHAT,className:"w-full !justify-start",variant:"stroke",onClick:()=>i(void 0,{measurementListId:Oe,eventName:"click",elementId:"search",context:"sessionId"})})}),e.jsx(R,{content:a("Discover the hottest investment topics in Nuri"),trackingProps:{measurementListId:"assistant header discover tooltip"},children:e.jsx(p,{text:a("Discover"),IconLeft:ws,iconClassName:f("size-5",{"!fill-secondary-500":u===b.DISCOVER}),className:f("mt-2 w-full !justify-start",{"!text-secondary-500":u===b.DISCOVER}),variant:"tertiary",onClick:()=>o({measurementListId:Pe,eventName:"click",elementId:"search"})})}),c.length>0&&e.jsx(ks,{title:a("Previous chats"),Icon:rs,onThreadItemClick:r,threads:c,className:"mt-3"}),!l&&e.jsx(bs,{})]})};let I;const Ne=()=>{if(F()||I!==void 0)return I;try{sessionStorage.setItem("bc_test",""),sessionStorage.removeItem("bc_test"),I=!0}catch{I=!1}return I},Is=s=>Ne()?sessionStorage.getItem(s):null,Ms=s=>Ne()?(sessionStorage.setItem(s.key,s.value),!0):!1,As=({text:s,animationOff:t=!1,onAnimationFinished:a,delay:l=10})=>{const[r,i]=n.useState(t?s:""),[o,c]=n.useState(t);return n.useEffect(()=>{if(t)return()=>{};const u=s.split(""),d=u.map((m,h)=>setTimeout(()=>{i(w=>`${w}${m}`),h===u.length-1&&(c(!0),a&&a())},h*l));return()=>{d.forEach(m=>clearTimeout(m))}},[t,l,a,s]),{animatedText:r,isAnimationFinished:o}},J=3,Es=(s,t)=>{const[a,l]=n.useState(!0),r=n.useMemo(()=>s.length>J,[]),i=n.useMemo(()=>a?qe(s,J):s,[a,s]),o=n.useCallback(()=>l(u=>!u),[]),c=n.useCallback(u=>{const d=y({measurementListId:De,elementId:u,context:`${t}`});k(d)},[]);return{isCollapsed:a,shouldDisplayShowMoreButton:r,sourcesToDisplay:i,handleCollapseButtonClick:o,handleSourceItemClick:c}},Ts=({sources:s,messageId:t})=>{const{t:a}=g(),{shouldDisplayShowMoreButton:l,isCollapsed:r,sourcesToDisplay:i,handleSourceItemClick:o,handleCollapseButtonClick:c}=Es(s,t);return e.jsxs("div",{className:"me-3 flex w-full flex-col gap-y-2 p-1 transition-colors",children:[e.jsx("div",{className:"text-xs text-slate-500",children:a("Explore related reads at BrokerChooser")}),e.jsxs("div",{className:"flex flex-col items-center gap-2 lg:items-start",children:[e.jsx("div",{className:"grid w-full grid-cols-1 gap-2 md:grid-cols-3",children:i.map(({url:u,title:d})=>e.jsx(p,{text:"",variant:"tertiary",href:u,onClick:()=>o(u),target:"_blank",className:"!p-0",bodyClassName:"!px-0 h-full w-full",children:e.jsxs("div",{className:"flex h-full w-full flex-col justify-between rounded-lg border border-slate-200 bg-white p-0 text-xs text-slate-600 hover:bg-white hover:drop-shadow-lg",children:[e.jsx("p",{className:"p-3 pb-1 text-start font-normal",children:d}),e.jsxs("div",{className:"flex justify-end p-2",children:[e.jsx("span",{className:"pe-1 text-xs font-semibold",children:a("Read")}),e.jsx(ms,{className:"size-4 rtl:scale-x-[-1]"})]})]})},d))}),l&&e.jsx("div",{className:"flex w-full justify-center",children:e.jsx(p,{text:a(r?"List more":"List less"),variant:"tertiary",size:"xs",bodyClassName:"!px-2",className:f("w-max shrink-0",r?"self-center":"lg:self-end"),IconRight:Xe,iconClassName:f("inline-block size-4 transition-transform duration-300",{"-rotate-180":!r}),onClick:c})})]})]})},Ls=()=>e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"hidden h-20 w-full animate-pulse !bg-left-top md:inline-block rtl:scale-x-[-1]",imageSrc:"/images/assistant/assistant-skeleton.svg"}),e.jsx(Y,{className:"inline-block h-20 w-full animate-pulse !bg-left-top md:hidden rtl:scale-x-[-1]",imageSrc:"/images/assistant/assistant-skeleton-mobile.svg"})]}),G=({children:s})=>e.jsxs("div",{className:"flex w-full gap-2 gap-y-[18px] lg:gap-x-[18px] lg:pe-28",children:[e.jsx("div",{className:"shrink-0 self-start rounded-lg bg-secondary-50 p-2 lg:p-3",children:e.jsx(xe,{className:"size-4 fill-secondary-500 lg:size-6"})}),e.jsx("div",{className:"flex w-full flex-col gap-y-1 lg:gap-y-2",children:s})]}),Rs=()=>he({abTestName:"purple-nuri-fake-door-test",variantName:"copy-response"}),Fs=15e3,_s=s=>{const[t,a]=n.useState(!1),l=x(i=>i.assistant.chat.actions.giveMessageFeedback),r=n.useCallback(i=>{s.rating===void 0&&(l(s.id,i),!i&&(a(!0),setTimeout(()=>a(!1),Fs)))},[s.rating,s.id,l]);return{isForumLinkVisible:t,submitFeedback:r}},zs=({message:s})=>{const{t}=g(),{isForumLinkVisible:a,submitFeedback:l}=_s(s),r=Rs();return e.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[e.jsx(A,{text:"",disabled:s.rating!==void 0,variant:"tertiary",className:"!p-2",bodyClassName:"!px-0",measurementListId:O,elementId:"like button",onClick:()=>l(!0),children:e.jsx(es,{className:f("size-5 stroke-slate-400",s.rating===!0&&"!stroke-secondary-500")})}),e.jsx(A,{text:"",disabled:s.rating!==void 0,variant:"tertiary",className:"!p-2",bodyClassName:"!px-0",measurementListId:O,elementId:"dislike button",onClick:()=>l(!1),children:e.jsx(ls,{className:f("size-5 stroke-slate-400",s.rating===!1&&"!stroke-secondary-500")})}),r&&e.jsx(me,{variant:ue.COPY_RESPONSE}),a&&e.jsxs("div",{className:"flex flex-col text-xs text-slate-500",children:[t("We are sorry that you were not happy with the response."),e.jsx(Je,{href:"https://community.brokerchooser.com/",target:"_blank",className:"font-xs !ps-0 font-light text-slate-500 underline !decoration-slate-500 !decoration-solid",measurementListId:O,elementId:"dislike button forum link",children:t("You can ask our analyst team for help on our forum.")})]})]})},$=({message:{id:s,text:t,sources:a,isGenerationFinished:l},message:r,showFeedback:i=!0})=>e.jsxs(G,{children:[t===""?e.jsx(Ls,{}):e.jsx(Qe,{content:t}),l&&e.jsxs(e.Fragment,{children:[i&&e.jsx(zs,{message:r}),a!==void 0&&a.length>0&&e.jsx(Ts,{sources:a,messageId:s})]})]}),ee="nuri_introduction_message_was_animated",Bs=()=>{const{t:s}=g(),{onDiscoverClick:t}=N(),{suggestedQueries:a}=We(),l={measurementListId:He,eventName:"click",elementId:"search",context:"sessionId"},r=n.useMemo(()=>{const d=s("Hey there! ðŸ‘‹ I'm Nuri, your personal AI assistant. Think of me as your shortcut to all things investing and brokerage. I'm here to help you find your perfect broker or answer any questions you have."),m=s("How can I help you today? You can ask me anything or check out these popular questions:");return`${d}<br><br>${m}`},[s]),i=n.useMemo(()=>F()?!1:!!Is(ee),[]),o=n.useCallback(()=>{Ee(()=>Ms({key:ee,value:"true"}),Te.Experience)},[]),{animatedText:c,isAnimationFinished:u}=As({text:r,onAnimationFinished:o,animationOff:i});return e.jsxs("div",{className:"z-10 size-full self-center overflow-y-auto px-4 lg:mt-8 lg:w-full lg:p-0",children:[e.jsx($,{showFeedback:!1,message:{author:M.ASSISTANT,isGenerationFinished:!0,threadId:-1,id:-1,text:c}}),u&&e.jsxs("div",{className:"mt-4 flex flex-col items-center gap-y-6 lg:px-28",children:[e.jsx(Ge,{queries:a}),e.jsx(p,{variant:"tertiary",text:s("Discover more topics"),onClick:()=>t(l)})]})]})},Os=({mode:s="light",selected:t,label:a,value:l,onClick:r})=>e.jsxs("button",{className:f("flex items-center gap-1 rounded-lg border px-2 py-1 pe-7 text-base transition-colors",{"border-slate-300 ps-7 text-slate-950 hover:bg-slate-100":s==="light"&&!t,"bg-slate-500 text-white":s==="light"&&t,"border-slate-500 ps-7 text-white hover:bg-slate-700":s==="dark"&&!t,"bg-slate-300 text-slate-950":s==="dark"&&t}),type:"button",onClick:()=>r(l),children:[t&&e.jsx(ie,{className:"size-4"}),a]}),Ps=()=>{const{t:s}=g(),[t,a]=n.useState(null),[l,r]=n.useState(!1),i=x(m=>m.assistant.chat.currentThreadId),o=x(m=>m.assistant.chat.threads),c=n.useMemo(()=>{const m=o.find(({id:h})=>h===i);return!m||m.rating===void 0||m.rating===null?null:m.rating>3?"positive":m.rating<3?"negative":null},[i,o]),u=n.useMemo(()=>({negative:[{value:"1",label:s("Doesnâ€™t answer my questions")},{value:"2",label:s("Incorrect answers")},{value:"3",label:s("Too generic, not personalized")},{value:"4",label:s("Too complicated")},{value:"5",label:s("Confusing interface")},{value:"6",label:s("Feels too robotic and unnatural")}],positive:[{value:"7",label:s("Answers are accurate and helpful")},{value:"8",label:s("Personalized and relevant")},{value:"9",label:s("Clear and easy to understand")},{value:"10",label:s("User-friendly interface")},{value:"11",label:s("Feels natural and engaging")}]}),[s]),d=n.useCallback(m=>{a(h=>{const w=y({measurementListId:P,context:"click",elementId:m});k(w);const j=h??[];return j.includes(m)?j.filter(S=>S!==m):[...j,m]})},[]);return n.useEffect(()=>{if(!i||t===null)return()=>{};r(!1);const m=setTimeout(async()=>{await window.BCAssistantApi.giveFollowUpAnswerOnThread(i,t.map(h=>parseInt(h,10))),r(!0)},3e3);return()=>clearTimeout(m)},[i,t]),n.useEffect(()=>{Le(P);const m=ae({measurementListId:P,context:"appeared"});k(m)},[]),c?e.jsxs(G,{children:[e.jsx("p",{className:"text-center md:text-start",children:s("Which options best describe your experience? Please select all that apply.")}),e.jsx("div",{className:"mt-4 flex flex-col justify-center gap-4 md:flex-row md:flex-wrap",children:u[c].map(({label:m,value:h})=>e.jsx(Os,{selected:t!==null&&t.includes(h),label:m,value:h,onClick:d},h))}),l?e.jsx("p",{className:"mt-4 text-center text-sm font-semibold text-slate-500",children:s("Noted! Thanks for helping me improve!")}):e.jsx("div",{className:"mt-4 h-5"})]}):null},Ds=({className:s})=>e.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:s,children:[e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.0802 25.8199C25.0802 25.9999 25.0102 26.1699 24.8902 26.2899C24.7602 26.4199 24.5902 26.4899 24.4102 26.4899C24.2302 26.4899 24.0602 26.4199 23.9402 26.2899C23.0202 25.3799 21.8002 24.8699 20.4902 24.8699C19.1802 24.8699 17.9702 25.3699 17.0502 26.2899C16.9302 26.4199 16.7602 26.4899 16.5802 26.4899C16.4002 26.4899 16.2302 26.4199 16.1002 26.2899C15.9802 26.1699 15.9102 25.9999 15.9102 25.8199C15.9102 25.6399 15.9802 25.4699 16.1002 25.3399C17.2802 24.1699 18.8402 23.5199 20.5002 23.5199C22.1602 23.5299 23.7102 24.1699 24.8802 25.3399C25.0002 25.4699 25.0702 25.6399 25.0702 25.8199H25.0802Z",fill:"inherit"}),e.jsx("path",{d:"M16.1799 19.25C15.9099 19.25 15.6399 19.1 15.5099 18.84C15.3199 18.47 15.4699 18.02 15.8499 17.83L17.8299 16.84C18.1999 16.66 18.6499 16.8 18.8399 17.17C19.0299 17.54 18.8799 17.99 18.4999 18.18L16.5199 19.17C16.4099 19.22 16.2999 19.25 16.1899 19.25H16.1799Z",fill:"inherit"}),e.jsx("path",{d:"M24.8198 19.25C24.7098 19.25 24.5898 19.22 24.4898 19.17L22.5098 18.18C22.1398 17.99 21.9898 17.54 22.1698 17.17C22.3598 16.8 22.8098 16.65 23.1798 16.84L25.1598 17.83C25.5298 18.02 25.6798 18.47 25.4998 18.84C25.3698 19.1 25.0998 19.25 24.8298 19.25H24.8198Z",fill:"inherit"}),e.jsx("path",{d:"M20.5 9.5C26.29 9.5 31 14.21 31 20C31 25.79 26.29 30.5 20.5 30.5C14.71 30.5 10 25.79 10 20C10 14.21 14.71 9.5 20.5 9.5ZM20.5 8C13.87 8 8.5 13.37 8.5 20C8.5 26.63 13.87 32 20.5 32C27.13 32 32.5 26.63 32.5 20C32.5 13.37 27.13 8 20.5 8Z",fill:"inherit"})]}),Hs=({className:s})=>e.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:s,children:[e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.3098 16.01C18.1998 15.8 17.8798 15.3 17.2698 15.3C16.6598 15.3 16.3298 15.8 16.2198 16.01C16.0798 16.3 16.0098 16.65 16.0098 17.02C16.0098 17.39 16.0798 17.75 16.2198 18.03C16.3298 18.25 16.6498 18.75 17.2698 18.75C17.8898 18.75 18.1998 18.25 18.3098 18.03C18.4498 17.75 18.5298 17.4 18.5298 17.02C18.5298 16.64 18.4498 16.3 18.3098 16.01ZM24.7698 16.01C24.6598 15.8 24.3398 15.3 23.7298 15.3C23.1198 15.3 22.7898 15.8 22.6898 16.01C22.5398 16.3 22.4698 16.65 22.4698 17.02C22.4698 17.39 22.5398 17.75 22.6898 18.03C22.7898 18.25 23.1098 18.75 23.7298 18.75C24.3498 18.75 24.6598 18.25 24.7698 18.03C24.9098 17.75 24.9898 17.4 24.9898 17.02C24.9898 16.64 24.9098 16.3 24.7698 16.01Z",fill:"inherit"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.0899 25.8199C25.0899 25.9999 25.0199 26.1699 24.8999 26.2899C24.7699 26.4199 24.5999 26.4899 24.4199 26.4899C24.2399 26.4899 24.0699 26.4199 23.9499 26.2899C23.0299 25.3799 21.8099 24.8699 20.4999 24.8699C19.1899 24.8699 17.9799 25.3699 17.0599 26.2899C16.9399 26.4199 16.7699 26.4899 16.5899 26.4899C16.4099 26.4899 16.2399 26.4199 16.1099 26.2899C15.9899 26.1699 15.9199 25.9999 15.9199 25.8199C15.9199 25.6399 15.9899 25.4699 16.1099 25.3399C17.2899 24.1699 18.8499 23.5199 20.5099 23.5199C22.1699 23.5299 23.7199 24.1699 24.8899 25.3399C25.0099 25.4699 25.0799 25.6399 25.0799 25.8199H25.0899Z",fill:"inherit"}),e.jsx("path",{d:"M20.5 9.5C26.29 9.5 31 14.21 31 20C31 25.79 26.29 30.5 20.5 30.5C14.71 30.5 10 25.79 10 20C10 14.21 14.71 9.5 20.5 9.5ZM20.5 8C13.87 8 8.5 13.37 8.5 20C8.5 26.63 13.87 32 20.5 32C27.13 32 32.5 26.63 32.5 20C32.5 13.37 27.13 8 20.5 8Z",fill:"inherit"})]}),Us=({className:s})=>e.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:s,children:[e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.0598 15.51C17.9498 15.3 17.6298 14.8 17.0198 14.8C16.4098 14.8 16.0798 15.3 15.9698 15.51C15.8298 15.8 15.7598 16.15 15.7598 16.52C15.7598 16.89 15.8298 17.25 15.9698 17.53C16.0798 17.75 16.3998 18.25 17.0198 18.25C17.6398 18.25 17.9498 17.75 18.0598 17.53C18.1998 17.25 18.2798 16.9 18.2798 16.52C18.2798 16.14 18.1998 15.8 18.0598 15.51ZM24.5198 15.51C24.4098 15.3 24.0898 14.8 23.4798 14.8C22.8698 14.8 22.5398 15.3 22.4398 15.51C22.2898 15.8 22.2198 16.15 22.2198 16.52C22.2198 16.89 22.2898 17.25 22.4398 17.53C22.5398 17.75 22.8598 18.25 23.4798 18.25C24.0998 18.25 24.4098 17.75 24.5198 17.53C24.6598 17.25 24.7398 16.9 24.7398 16.52C24.7398 16.14 24.6598 15.8 24.5198 15.51Z",fill:"inherit"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.25 8C13.78 8 8.5 13.27 8.5 19.75C8.5 26.23 13.78 31.5 20.25 31.5C26.72 31.5 32 26.23 32 19.75C32 13.27 26.73 8 20.25 8ZM20.25 30.15C14.52 30.15 9.85 25.48 9.85 19.75C9.85 14.02 14.52 9.34 20.25 9.34C25.98 9.34 30.66 14.01 30.66 19.75C30.66 25.49 25.99 30.15 20.25 30.15Z",fill:"inherit"}),e.jsx("path",{d:"M24.25 24.3999H16.25C15.84 24.3999 15.5 24.0599 15.5 23.6499C15.5 23.2399 15.84 22.8999 16.25 22.8999H24.25C24.66 22.8999 25 23.2399 25 23.6499C25 24.0599 24.66 24.3999 24.25 24.3999Z",fill:"inherit"})]}),Zs=({className:s})=>e.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:s,children:[e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.3098 16.01C18.1998 15.8 17.8798 15.3 17.2698 15.3C16.6598 15.3 16.3298 15.8 16.2198 16.01C16.0798 16.3 16.0098 16.65 16.0098 17.02C16.0098 17.39 16.0798 17.75 16.2198 18.03C16.3298 18.25 16.6498 18.75 17.2698 18.75C17.8898 18.75 18.1998 18.25 18.3098 18.03C18.4498 17.75 18.5298 17.4 18.5298 17.02C18.5298 16.64 18.4498 16.3 18.3098 16.01ZM24.7698 16.01C24.6598 15.8 24.3398 15.3 23.7298 15.3C23.1198 15.3 22.7898 15.8 22.6898 16.01C22.5398 16.3 22.4698 16.65 22.4698 17.02C22.4698 17.39 22.5398 17.75 22.6898 18.03C22.7898 18.25 23.1098 18.75 23.7298 18.75C24.3498 18.75 24.6598 18.25 24.7698 18.03C24.9098 17.75 24.9898 17.4 24.9898 17.02C24.9898 16.64 24.9098 16.3 24.7698 16.01Z",fill:"inherit"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.0899 24.0699C25.0899 23.8899 25.0199 23.7199 24.8999 23.5999C24.7699 23.4699 24.5999 23.3999 24.4199 23.3999C24.2399 23.3999 24.0699 23.4699 23.9499 23.5999C23.0299 24.5099 21.8099 25.0199 20.4999 25.0199C19.1899 25.0199 17.9799 24.5199 17.0599 23.5999C16.9399 23.4699 16.7699 23.3999 16.5899 23.3999C16.4099 23.3999 16.2399 23.4699 16.1099 23.5999C15.9899 23.7199 15.9199 23.8899 15.9199 24.0699C15.9199 24.2499 15.9899 24.4199 16.1099 24.5499C17.2899 25.7199 18.8499 26.3699 20.5099 26.3699C22.1699 26.3599 23.7199 25.7199 24.8899 24.5499C25.0099 24.4199 25.0799 24.2499 25.0799 24.0699H25.0899Z",fill:"inherit"}),e.jsx("path",{d:"M20.5 9.5C26.29 9.5 31 14.21 31 20C31 25.79 26.29 30.5 20.5 30.5C14.71 30.5 10 25.79 10 20C10 14.21 14.71 9.5 20.5 9.5ZM20.5 8C13.87 8 8.5 13.37 8.5 20C8.5 26.63 13.87 32 20.5 32C27.13 32 32.5 26.63 32.5 20C32.5 13.37 27.13 8 20.5 8Z",fill:"inherit"})]}),Vs=({className:s})=>e.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:s,children:[e.jsx("path",{d:"M18.04 18.75C17.84 18.75 17.63 18.67 17.49 18.51C17.03 18.01 16.88 18.01 16.85 18C16.81 18 16.62 18.03 16.11 18.54C15.82 18.83 15.34 18.83 15.05 18.54C14.76 18.25 14.76 17.77 15.05 17.48C15.55 16.99 16.17 16.45 16.88 16.51C17.6 16.53 18.15 17.02 18.59 17.51C18.87 17.82 18.85 18.29 18.54 18.57C18.4 18.7 18.21 18.77 18.03 18.77L18.04 18.75Z",fill:"inherit"}),e.jsx("path",{d:"M25.4199 18.7501C25.2199 18.7501 25.0099 18.6701 24.8699 18.5101C24.4099 18.0101 24.2599 17.9901 24.2299 18.0001C24.1899 18.0001 23.9999 18.0301 23.4899 18.5401C23.1999 18.8301 22.7199 18.8301 22.4299 18.5401C22.1399 18.2501 22.1399 17.7701 22.4299 17.4801C22.9299 16.9901 23.5399 16.4601 24.2599 16.5101C24.9799 16.5301 25.5299 17.0201 25.9699 17.5101C26.2499 17.8201 26.2299 18.2901 25.9199 18.5701C25.7799 18.7001 25.5899 18.7701 25.4099 18.7701L25.4199 18.7501Z",fill:"inherit"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.0802 24.0699C25.0802 23.8899 25.0102 23.7199 24.8902 23.5999C24.7602 23.4699 24.5902 23.3999 24.4102 23.3999C24.2302 23.3999 24.0602 23.4699 23.9402 23.5999C23.0202 24.5099 21.8002 25.0199 20.4902 25.0199C19.1802 25.0199 17.9702 24.5199 17.0502 23.5999C16.9302 23.4699 16.7602 23.3999 16.5802 23.3999C16.4002 23.3999 16.2302 23.4699 16.1002 23.5999C15.9802 23.7199 15.9102 23.8899 15.9102 24.0699C15.9102 24.2499 15.9802 24.4199 16.1002 24.5499C17.2802 25.7199 18.8402 26.3699 20.5002 26.3699C22.1602 26.3599 23.7102 25.7199 24.8802 24.5499C25.0002 24.4199 25.0702 24.2499 25.0702 24.0699H25.0802Z",fill:"inherit"}),e.jsx("path",{d:"M20.5 9.5C26.29 9.5 31 14.21 31 20C31 25.79 26.29 30.5 20.5 30.5C14.71 30.5 10 25.79 10 20C10 14.21 14.71 9.5 20.5 9.5ZM20.5 8C13.87 8 8.5 13.37 8.5 20C8.5 26.63 13.87 32 20.5 32C27.13 32 32.5 26.63 32.5 20C32.5 13.37 27.13 8 20.5 8Z",fill:"inherit"})]}),Ws=[{value:1,icon:Ds},{value:2,icon:Hs},{value:3,icon:Us},{value:4,icon:Zs},{value:5,icon:Vs}],Gs=()=>{const{t:s}=g(),[t,a]=n.useState(null),l=n.useCallback(d=>{const m=y({measurementListId:Q,context:"click",elementId:d.toString()});k(m),a(d)},[]),r=x(d=>d.assistant.chat.currentThreadId),i=x(d=>d.assistant.chat.actions.updateThreadById),o=x(d=>d.assistant.chat.actions.appendNewSystemMessage),[c,u]=n.useState(!1);return n.useEffect(()=>{if(!r||t===null)return()=>{};const d=setTimeout(async()=>{await window.BCAssistantApi.giveFeedbackOnThread(r,t),u(!0),i(r,{rating:t}),o(L.FEEDBACK_FOLLOW_UP)},3e3);return()=>clearTimeout(d)},[o,r,t,i]),n.useEffect(()=>{const d=ae({measurementListId:Q,context:"appeared"});k(d)},[]),e.jsx(G,{children:e.jsx("div",{className:"mx-auto flex w-full max-w-md flex-col gap-3 rounded-xl border border-slate-300 p-4 pb-2 shadow",children:c?e.jsxs(e.Fragment,{children:[e.jsx(as,{className:"mx-auto size-8 text-success-500"}),e.jsx("p",{className:"text-center text-sm leading-tight text-slate-950",children:s("Got it! Thanks for your response!")})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-center text-sm leading-tight text-slate-950",children:s("How am I doing so far? Let me know by tapping one of these!")}),e.jsx("div",{className:"flex justify-center gap-2",children:Ws.map(({value:d,icon:m})=>e.jsx(p,{text:"give feedback",variant:"tertiary",size:"sm",className:"!px-0 !py-0",bodyClassName:"!p-0",onClick:()=>l(d),children:e.jsx(m,{className:f("size-10",{"fill-slate-500":t===null,"fill-slate-300":t!==null&&t!==d,"fill-blue-500":t===d})},d)},d))})]})})})},$s=({message:s})=>{switch(s.type){case L.FEEDBACK:return e.jsx(Gs,{});case L.FEEDBACK_FOLLOW_UP:return e.jsx(Ps,{});default:return null}},Ks=()=>he({abTestName:"purple-nuri-fake-door-test",variantName:"edit-user-question"}),Qs=({message:s})=>{const t=Ks();return e.jsxs("div",{className:"flex w-full flex-col items-end gap-y-1 lg:gap-y-2 lg:pe-28",children:[e.jsx("div",{className:"w-fit min-w-0 max-w-[80%] text-wrap break-words rounded-lg bg-slate-100 px-3 py-2 xl:max-w-xl",children:s.text}),t&&e.jsx(me,{variant:ue.EDIT_QUESTION})]})},ye=n.memo(({currentThreadMessages:s})=>e.jsx(e.Fragment,{children:s.map(t=>{switch(t.author){case M.USER:return e.jsx(Qs,{message:t},t.id);case M.ASSISTANT:return e.jsx($,{message:t},t.id);case M.SYSTEM:return e.jsx($s,{message:t},t.id);default:return null}})}));ye.displayName="CurrentThreadMessageList";const Ys=()=>{const s=x(c=>c.assistant.chat.messageStore.currentThreadMessages),t=x(c=>c.assistant.chat.currentThreadId),a=x(c=>c.assistant.chat.actions.updateThreadById),l=x(c=>c.assistant.chat.messageBuffer.incomingMessage),r=n.useRef(null),i=n.useCallback(async c=>{await window.BCAssistantApi.markThreadAsRead(c),a(c,{nrOfUnreadMessages:0})},[a]);n.useEffect(()=>{F()||!t||i(t)},[t,i]);const o=n.useRef(!0);return n.useEffect(()=>{var c;(c=r.current)==null||c.scrollIntoView({behavior:o.current?"instant":"smooth"}),o.current=!1},[l,s]),e.jsx("div",{className:"z-10 size-full self-center overflow-y-auto overscroll-none px-4 lg:mt-8 lg:w-full lg:p-0 lg:pe-8",children:e.jsxs("div",{className:"flex flex-col gap-y-6",children:[e.jsx(ye,{currentThreadMessages:s}),l&&e.jsx($,{message:l}),e.jsx("div",{className:"invisible -mt-6",ref:r})]})})},qs=({className:s,onClose:t,title:a,description:l,measurementListId:r,compact:i})=>{const{t:o}=g(),c=n.useCallback(d=>{const m=y({measurementListId:r,elementId:d});k(m)},[r]),u=n.useMemo(()=>e.jsxs(e.Fragment,{children:[e.jsx(p,{text:"register with google",variant:"stroke",size:"sm",className:f("w-full grow",i&&"h-8"),href:"/auth/google/redirect",onClick:()=>c("registration with google button"),children:e.jsx(E,{imageSrc:re,alt:"Google icon",className:"size-5"})}),e.jsx(p,{text:"register with facebook",variant:"stroke",size:"sm",className:f("w-full grow",i&&"h-8"),href:"/auth/facebook/redirect",onClick:()=>c("registration with facebook button"),children:e.jsx(Ve,{className:"size-5"})})]}),[i,c]);return e.jsxs("div",{className:f("flex flex-col gap-6 p-3 text-slate-600",s),children:[e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:f("font-semibold text-slate-800",i?"text-base lg:text-lg":"text-lg lg:text-2xl"),children:a}),l&&e.jsx("div",{className:f(i?"text-sm lg:text-base":"text-base lg:text-lg"),children:l})]}),t&&e.jsx(p,{text:"Close",mode:"light",variant:"tertiary",size:"md",className:"mt-0 h-4 w-4 lg:mt-0.5",onClick:t,children:e.jsx(_,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:f("flex w-full items-center",i?"gap-2":"flex-col gap-1"),children:[i?u:e.jsx("div",{className:"flex w-full gap-2",children:u}),!i&&e.jsx("div",{className:"text-sm",children:o("or")}),e.jsx(p,{text:"register with email",variant:"stroke",size:"sm",className:f("w-full text-sm",i&&"h-8"),href:"/register",withRightArrow:!i,onClick:()=>c("registration with email button"),children:i?e.jsx(oe,{className:"size-5"}):o("Sign up with email")})]})]})},Xs=({children:s})=>e.jsx("div",{className:"absolute right-0 top-0 z-20 flex h-full w-full items-center justify-center rounded-b-3xl bg-white bg-[url(/public/images/assistant/archive.svg)] bg-auto bg-left-bottom bg-repeat-y",children:s}),Js=()=>{const{t:s}=g(),{onOpenWithActiveChat:t}=N(),a=n.useCallback(()=>{const l=y({measurementListId:"assistant register popup close"});t(l).then()},[t]);return e.jsx(Xs,{children:e.jsx("div",{className:"max-w-xs rounded-lg bg-white shadow-lg",children:e.jsx(qs,{onClose:a,title:s("Sign up to unlock your previous chats with Nuri!"),measurementListId:"assistant popup registration box",compact:!0,className:"rounded-lg"})})})};var v=(s=>(s.ALL="all",s.NEW="new",s.POPULAR="popular",s))(v||{});const et=({children:s})=>{const{onOpenWithActiveChat:t}=N();return e.jsxs("div",{className:"lg:flex-column align-content-start absolute right-0 top-0 z-20 flex h-full w-full flex-row flex-wrap content-start rounded-xl bg-white p-4 lg:flex-nowrap lg:gap-10 lg:p-8",children:[e.jsx("div",{className:"order-1 flex h-fit w-1/2 items-start justify-start lg:w-10 lg:justify-center",children:e.jsx(p,{text:"Back",mode:"light",variant:"tertiary",className:"d-block bg-white !p-3.5",bodyClassName:"!p-0",onClick:()=>t(),children:e.jsx(de,{className:"size-5 shrink-0 rtl:scale-x-[-1]"})})}),e.jsx("div",{className:"order-3 flex h-full flex-grow flex-col lg:order-2",children:s}),e.jsx("div",{className:"order-2 flex h-fit w-1/2 items-start justify-end lg:order-3 lg:w-10 lg:justify-center",children:e.jsx(W,{className:"-ml-2"})})]})},st=({discoverQuestion:{question:s,imageUrl:t,emoji:a},onClick:l,className:r})=>{const{t:i}=g();return e.jsxs("div",{className:f(r,"flex cursor-pointer flex-col gap-2 rounded-lg border border-slate-200 p-4 transition-all duration-200 hover:border-slate-400 hover:shadow-lg"),role:"presentation",onClick:l,children:[t?e.jsx(E,{imageSrc:t,alt:s,className:"aspect-[4/3] w-full rounded-lg object-cover"}):e.jsx("div",{className:"title-6 -mb-2",children:a}),e.jsx("div",{className:"text-body",children:s}),e.jsx("div",{className:"flex justify-end",children:e.jsx(p,{mode:"light",size:"xs",variant:"tertiary",text:i("Ask Nuri"),IconLeft:xe,iconClassName:"size-4"})})]})},tt=()=>{const s=x(h=>h.assistant.chat.discoverQuestions),t=x(h=>h.assistant.chat.actions.incrementDiscoverQuestionClicks),{t:a}=g(),{onOpenWithNewChat:l}=N(),r=n.useRef(null),[i,o]=n.useState(v.ALL),c=async(h,w)=>{await l(h),await t(w)},u=h=>{var w;o(j=>j===h?v.ALL:h),(w=r.current)==null||w.scrollTo({top:0,behavior:"smooth"})},d=s.filter(h=>{switch(i){case v.NEW:return h.is_new;case v.POPULAR:return h.is_popular;default:return!0}}),m=h=>f("border border-slate-300 !p-2 !font-normal",{"bg-slate-500 !font-medium text-white hover:bg-slate-700 hover:text-white":i===h});return e.jsxs(et,{children:[e.jsxs("div",{className:"mb-4 mt-2 text-left md:mb-6 md:mt-0",children:[e.jsx("p",{className:"title-4 md:title-5 text-medium mb-1 text-slate-950 md:mb-3",children:a("Ask Nuri about new and hot topics")}),e.jsx("p",{children:a("Choose from predefined questions and take your investment to the next level with the power of AI")})]}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx(p,{text:a("All"),variant:"tertiary",className:m(v.ALL),onClick:()=>u(v.ALL)}),e.jsx(p,{text:a("New"),variant:"tertiary",className:m(v.NEW),onClick:()=>u(v.NEW)}),e.jsx(p,{text:a("Popular"),variant:"tertiary",className:m(v.POPULAR),onClick:()=>u(v.POPULAR)})]}),e.jsx("div",{ref:r,className:"bottom-8 mb-14 mt-8 overflow-y-scroll lg:mb-0",children:e.jsx("div",{className:"columns-1 gap-4 pb-4 md:columns-2 xl:columns-3",children:d.map(h=>e.jsx(st,{discoverQuestion:h,onClick:()=>c(h.question,h.id),className:"inline-block break-inside-avoid [&:not(:first-child)]:mt-4"},h.id))})})]})},at=()=>{const s=x(t=>t.assistant.common.view);return n.useMemo(()=>{switch(s){case b.CHAT:return e.jsx(Ys,{});case b.NEW_CHAT:return e.jsx(Bs,{});case b.DISCOVER:return e.jsx(tt,{});case b.REGISTER:return e.jsx(Js,{});default:return null}},[s])},nt=()=>{const{t:s}=g();return e.jsx("div",{className:"relative -mt-4 h-0 w-full",children:e.jsxs("div",{className:"absolute inset-x-0 bottom-0 z-30 mx-4 flex items-center gap-x-2 rounded-lg bg-danger-50 p-4 text-xs text-danger-500 lg:mx-0 lg:me-8",children:[e.jsx(ss,{className:"size-5 shrink-0 fill-danger-600"}),s("We are currently unable to connect to the server. Stay with us, we usually need just a few seconds to solve this problem."),e.jsx(cs,{className:"ms-auto size-5 shrink-0 animate-pulse stroke-danger-600"})]})})},lt=s=>{const[t,a]=n.useState(!1),l=x(C=>C.assistant.chat.currentThreadId),r=x(C=>C.assistant.common.connectionStatus),i=x(C=>C.assistant.common.isGenerating),o=x(C=>C.assistant.common.view),c=x(C=>C.assistant.chat.actions.fetchDiscoverQuestions),u=x(C=>C.assistant.chat.actions.fetchMessagesForThread),{onOpen:d}=N();n.useEffect(()=>{s&&d().then()},[]),n.useEffect(()=>{if(o===b.DISCOVER){c().then();return}if(o!==b.CHAT)return;!i&&l!==void 0&&u(l).then()},[o,l]),n.useEffect(()=>{t&&a(!1)},[o,l]);const m=n.useCallback(()=>{a(z=>!z);const C=y({measurementListId:"assistant sidebar toggle",elementId:t?"close":"open"});k(C)},[t]),h=n.useMemo(()=>Re.has(o),[o]),w=n.useMemo(()=>o===b.MINIMIZED,[o]),j=n.useMemo(()=>r===Fe.FAILED,[r]),S=n.useMemo(()=>o===b.DISCOVER,[o]);return{isOpen:h,shouldDisplayMinimizedModal:w,isSidebarOpen:t,shouldShowConnectionError:j,toggleSidebar:m,isFullWidthView:S}},it=9e4,rt=s=>{const t=x(o=>o.assistant.common.isGenerating),a=x(o=>o.assistant.common.view),l=x(o=>o.assistant.chat.currentThreadId),r=x(o=>o.assistant.chat.threads),i=x(o=>o.assistant.chat.messageStore.currentThreadMessages);n.useEffect(()=>{if(t)return()=>{};const o=r.find(({id:d})=>d===l);if(!o||o.rating)return()=>{};if(i.length<2)return()=>{};const c=i.find(({author:d})=>d===M.SYSTEM);if(c&&c.type===L.FEEDBACK)return()=>{};T.setModalBodyRef(s);const u=setTimeout(()=>{T.startListeningForInactivity()},it);return()=>{clearTimeout(u),T.stopListeningForInactivity(),T.removeModalBodyRef()}},[a,r,l,i,s,t])},na=({totalUnreadMessages:s,shouldOpenAutomatically:t})=>{const{isOpen:a,isSidebarOpen:l,shouldDisplayMinimizedModal:r,shouldShowConnectionError:i,toggleSidebar:o,isFullWidthView:c}=lt(t),{totalUnreadMessages:u}=we({initialNrOfUnreadMessages:s}),{shouldHide:d}=be(),{onMinimize:m}=N(),h=D(se.lg),w=ne(),j=n.useRef(null);rt(j);const S=x(B=>B.assistant.chat.isAssistantPlanPromoModalOpen),C=x(B=>B.assistant.chat.actions.handleCloseAssistantPlanPromoModal),z=n.useMemo(()=>({duration:{open:800,close:400},initial:{opacity:0,transform:"scale(0.1) translateY(400px) translateX(400px)"},common:{transformOrigin:w?"bottom left":"bottom right"}}),[w]),{user:ke}=H(),[Se,Ie]=n.useState(!0);return e.jsxs(e.Fragment,{children:[!d&&e.jsx(gs,{totalUnreadMessages:u}),r&&e.jsx(xs,{totalUnreadMessages:u}),e.jsx(hs,{isOpen:S,onDialogClose:C}),e.jsx(te,{dialogClasses:"relative flex lg:aspect-video justify-center rounded-lg p-4 lg:p-8 bg-white lg:w-[90dvw] h-[90dvh] w-dvw",isComponentVisible:a,onDialogClose:m,transitionStyleProps:z,children:e.jsx(Cs,{children:e.jsxs("div",{ref:j,className:"flex size-full flex-col lg:flex-row lg:gap-x-6 lg:gap-y-0",translate:"no",children:[!c&&e.jsxs(e.Fragment,{children:[e.jsx(je,{totalUnreadMessages:u,onClick:o}),e.jsx("div",{className:f("absolute z-40 flex size-full flex-col gap-y-4 overflow-hidden rounded-3xl lg:relative lg:w-1/4 lg:min-w-80 lg:translate-x-0",!l&&"hidden lg:block"),children:e.jsx(Ss,{totalUnreadMessages:u,onHamburgerButtonClick:o})})]}),!ke&&Se&&e.jsx(fs,{onClose:()=>Ie(!1)}),e.jsxs("div",{className:f("relative flex w-full flex-col gap-y-4 overflow-hidden lg:h-full",c?"bottom-4 h-full w-full lg:bottom-0":"h-[90%] lg:w-3/4"),children:[!c&&e.jsx("div",{className:"end-0 top-0 z-50 hidden lg:absolute lg:block lg:p-8",children:e.jsx(W,{})}),e.jsx(at,{}),i&&e.jsx(nt,{}),e.jsx($e,{autoFocus:!h,newChatOnSubmit:!1,enableFakeDoor:!0})]})]})})})]})};export{na as AssistantModal};
//# sourceMappingURL=AssistantModal-CPHxItsT.js.map
