import{r as c,j as e}from"./Empty-CbVzuLts.js";import{B as N}from"./ButtonOrLink-BXF_cz5f.js";import{S as ie}from"./SectionWrapper-DOzdpw9L.js";import{B as E}from"./Badge-OjVc2uIR.js";import{I as ce}from"./ImageAsBackground-BYbnEpTG.js";import{I as F}from"./Image-Cq_3T_IK.js";import{c as u}from"./index-C6HkmSz0.js";import{G as de,S as me,U as ue,J as z,u as j,V as xe,a as L,s as A,e as V,i as Y,r as fe,z as he,C as pe,j as ge,A as we,h as be}from"./app-core-DsZLvh-T.js";import{F as je}from"./ChevronRightIcon-DMurhKpY.js";import{D as S,S as M}from"./SelectableIconWrapper-BRZkDSTg.js";import{F as J}from"./ChevronDownIcon-CRZXCply.js";import{B as P}from"./Breakpoints-DrIi2fE3.js";import{N as y,u as Ne}from"./useUserHandling-aMiDhUow.js";import{u as b}from"./useTranslation-DBGLPtMT.js";import{F as ve}from"./ArrowRightIcon-BPHA_4Zr.js";import{u as H}from"./useAssistantInteractions-KyZyfcCI.js";import{F as K}from"./XMarkIcon-zYCpwGN2.js";import{T as Z}from"./TrackedButtonOrLink-CLY2ep4D.js";import{N as Ce,M as q}from"./MarkdownText-CDJp3RWO.js";import{F as ye}from"./SparklesIcon-Ci394G6j.js";import{I as Se}from"./Input-CqPMj87y.js";import{F as Q}from"./MagnifyingGlassIcon-DLbkH4Fi.js";import{C as Ie}from"./Card-B-pbm6AE.js";import{F as ke}from"./ArrowRightIcon-oGraQgyg.js";import{h as Le}from"./moment-BusQ5YWI.js";import{F as Ae}from"./SparklesIcon-DKqUpc2A.js";import{L as Me}from"./LoadingOverlay-Cdy4FMCD.js";import{F as Ee}from"./UserCircleIcon-DsotuBA_.js";import{C as Te,B as _e,a as Re}from"./BCCountrySelector-DFEqMWW5.js";import{y as $}from"./index-BwKToVaI.js";import{H as Oe}from"./HalfPageDialogue-2Pxgg25v.js";import{S as U}from"./Spinner-BVKQZHjL.js";import{D as Be}from"./Dropdown-BM3EksQ5.js";import{u as De}from"./useIsRtl-CrjScdAD.js";import{b as Fe}from"./_baseIndexOf-CSNv4tXc.js";import"./preload-helper-9zrlRb12.js";import"./_baseIsEqual-BU7ud4ak.js";import"./floating-ui.react-CDjzeHtS.js";import"./floating-ui.dom-cvZeYP3P.js";import"./index-B_BLzt9w.js";import"./registrationModalLocalStorageId-NLzc7oHj.js";import"./useBCClientSideData-CaltDZgi.js";import"./utils-B1GDy_RR.js";import"./useMeasureImpression-Crl5RCea.js";import"./useHumanEyeEffect-CrozREcw.js";import"./isEqual-jqLKjBFs.js";import"./MultiSelectDropdown-Cs681hZ3.js";import"./react-select.esm-CRkcBDVW.js";import"./assertThisInitialized-ITY-qwU0.js";import"./hoist-non-react-statics.cjs-BjWjiDeM.js";import"./debounce-DHkGCuGo.js";import"./BCSelector-mo7Ok1YF.js";import"./clsx-CA07h-Wh.js";import"./BaseIcon-wXEPPWk8.js";try{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new s.Error().stack;t&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[t]="cc4088f8-867e-4075-a342-0183853377f3",s._sentryDebugIdIdentifier="sentry-dbid-cc4088f8-867e-4075-a342-0183853377f3")}catch{}{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};s._sentryModuleMetadata=s._sentryModuleMetadata||{},s._sentryModuleMetadata[new s.Error().stack]=Object.assign({},s._sentryModuleMetadata[new s.Error().stack],{"_sentryBundlerPluginAppKey:bc-frontend":!0})}function ze(s,t,a){var n=s.length;return a=a===void 0?n:a,!t&&a>=n?s:de(s,t,a)}var He="\\ud800-\\udfff",$e="\\u0300-\\u036f",We="\\ufe20-\\ufe2f",Ue="\\u20d0-\\u20ff",Ge=$e+We+Ue,Ve="\\ufe0e\\ufe0f",Ye="\\u200d",Je=RegExp("["+Ye+He+Ge+Ve+"]");function Pe(s){return Je.test(s)}function Ke(s){return s.split("")}var X="\\ud800-\\udfff",Ze="\\u0300-\\u036f",qe="\\ufe20-\\ufe2f",Qe="\\u20d0-\\u20ff",Xe=Ze+qe+Qe,es="\\ufe0e\\ufe0f",ss="["+X+"]",R="["+Xe+"]",O="\\ud83c[\\udffb-\\udfff]",ts="(?:"+R+"|"+O+")",ee="[^"+X+"]",se="(?:\\ud83c[\\udde6-\\uddff]){2}",te="[\\ud800-\\udbff][\\udc00-\\udfff]",as="\\u200d",ae=ts+"?",oe="["+es+"]?",os="(?:"+as+"(?:"+[ee,se,te].join("|")+")"+oe+ae+")*",ns=oe+ae+os,rs="(?:"+[ee+R+"?",R,se,te,ss].join("|")+")",ls=RegExp(O+"(?="+O+")|"+rs+ns,"g");function is(s){return s.match(ls)||[]}function G(s){return Pe(s)?is(s):Ke(s)}function cs(s,t){for(var a=-1,n=s.length;++a<n&&Fe(t,s[a],0)>-1;);return a}var ds=/^\s+/;function ms(s,t,a){if(s=me(s),s&&t===void 0)return s.replace(ds,"");if(!s||!(t=ue(t)))return s;var n=G(s),r=cs(n,G(t));return ze(n,r).join("")}function us({title:s,titleId:t,...a},n){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?c.createElement("title",{id:t},s):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const xs=c.forwardRef(us);function fs({title:s,titleId:t,...a},n){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?c.createElement("title",{id:t},s):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z"}))}const hs=c.forwardRef(fs),ps=({url:s,itemTitle:t,logoPath:a,withBackgroundIcon:n,withBadge:r,withNewBadge:o,withHotBadge:i,eventHandler:l})=>e.jsxs("a",{href:s,onClick:()=>l(s),className:"flex min-h-11 items-center gap-2.5 rounded-lg px-4 py-1 text-[15px] text-slate-800 outline outline-transparent transition-colors duration-300 hover:bg-slate-100 hover:text-blue-500 focus:outline-1 focus:outline-blue-500",children:[a&&(n?e.jsx(ce,{imageSrc:a,className:"h-7 w-7"}):e.jsx(F,{alt:t,imageSrc:a,className:"h-7 w-7"})),r&&e.jsx(E,{}),t,o&&e.jsx(E,{text:"NEW"}),i&&e.jsx(E,{text:"HOT"})]}),gs="static_menu_item",ws="dynamic_menu_item",bs=s=>{const{componentName:t,eventHandler:a}=s;switch(t){case"storybook_demo":return e.jsx("button",{type:"button",onClick:()=>a(t),children:"Demo"});default:return z(new Error(`NavBarDynamicMenuItem: Unknown id: ${t}`)),e.jsx("div",{})}},_=({columnTitle:s,items:t,readMoreLink:a,eventHandler:n,className:r})=>e.jsxs("div",{className:u("min-w-72 border-slate-200 pb-5 xl:border-none xl:pb-0 [&:not(:last-child)]:border-b",r),children:[s&&e.jsx("div",{className:"mb-6 px-4 text-base font-bold text-slate-800",children:s}),e.jsx("div",{className:"grid w-full",children:t.map(o=>{if(o.type===ws)return e.jsx("div",{children:bs({componentName:o.componentName,eventHandler:n})},o.id);const{itemTitle:i,url:l,withBadge:f,withNewBadge:d,withHotBadge:x,logoPath:h}=o;return e.jsx(ps,{itemTitle:i,url:l,withBadge:f,withNewBadge:d,withHotBadge:x,logoPath:h,eventHandler:n},l)})}),a&&e.jsx(N,{href:a.url,variant:"underlined-secondary",size:"sm",text:a.title,wrapperClassName:"relative mt-5 start-1",IconRight:je,iconClassName:"h-4 w-4 stroke-[3]"})]}),js=({mode:s,menuTitle:t,menuId:a,measurementListId:n,columns:r,mainAxis:o,eventHandler:i})=>e.jsx(S,{measurementListId:n,elementId:a,crossAxis:-32,mainAxis:o,ariaLabel:t,boxContent:e.jsx("div",{className:"flex gap-12 rounded-lg bg-white px-4 py-8 shadow-3xl",children:r.map(({columnTitle:l,items:f,readMoreLink:d})=>e.jsx(_,{columnTitle:l,eventHandler:i,items:f,readMoreLink:d},l))}),children:l=>e.jsx("div",{className:u("mt-0.5 flex h-full items-center border-b-2 border-transparent pb-1 transition-colors duration-300 hover:border-primary-500",{"!border-primary-500":l}),children:e.jsxs("div",{className:u("flex items-center gap-2 text-[15px] font-bold leading-4",s==="dark"?"text-white":"text-slate-800"),children:[e.jsx("div",{className:"max-w-28 flex-1",children:t}),e.jsx(J,{className:u("inline-block h-4 w-4 transition-transform duration-300",{"-rotate-180":l}),strokeWidth:3})]})})}),B=56,Ns=({mode:s,adminMenu:t})=>e.jsx(S,{measurementListId:y,elementId:"admin_dropdown",crossAxis:-32,mainAxis:10,ariaLabel:t.columnTitle,boxContent:e.jsx("div",{className:"flex flex-col rounded-lg bg-white px-4 py-8 shadow-3xl",children:e.jsx(_,{columnTitle:t.columnTitle,eventHandler:()=>{},items:t.items})}),children:a=>e.jsx(M,{isOpen:a,mode:s,className:"relative",children:e.jsx(hs,{className:"h-5 w-5"})})}),vs=({mode:s="dark",eventHandler:t,internalNotification:a,className:n})=>e.jsxs("a",{href:"/",onClick:()=>{t("https://brokerchooser.com/")},children:[e.jsx(F,{alt:"BrokerChooser logo",imageSrc:s==="dark"?"/images/logo.svg":"/images/brokerchooser-logo.svg",className:u("ms-4 mt-1 h-12 max-w-56",n)}),a&&e.jsx("div",{className:"absolute top-0 text-danger-500",children:a})]}),Cs=({mode:s,menuTitle:t,measurementListId:a,menuId:n,columns:r,eventHandler:o})=>{const{t:i}=b(),l=c.useRef(null),f=j(d=>d.brokerOfTheMonth.showBrokerOfTheMonthPromoBar);return e.jsx(S,{ref:l,measurementListId:a,elementId:n,anchoredToOpener:!1,boxClassName:"w-full",ariaLabel:t,childClassName:u("flex w-full items-center justify-between gap-2.5 border-b px-1 py-4 text-sm font-bold",s==="dark"?"border-slate-600 text-white":"border-slate-200 text-slate-800"),boxContent:e.jsxs("div",{className:u("absolute w-full bg-white p-6 shadow-3xl",f?"top-24":"top-14"),children:[e.jsx(N,{text:i("Back"),variant:"underlined-secondary",wrapperClassName:"mb-4",withLeftArrow:!0,size:"sm",onClick:()=>{var d;return(d=l.current)==null?void 0:d.openChange()}}),e.jsx("div",{className:"flex flex-col gap-5",children:r.map(({columnTitle:d,items:x,readMoreLink:h})=>e.jsx(_,{columnTitle:d,eventHandler:o,items:x,readMoreLink:h,className:"w-full"},d))})]}),children:d=>e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex-1 text-start",children:t}),e.jsx(J,{className:u("h-4 w-4 transition-transform",{"-rotate-180":d}),strokeWidth:3})]})})},ys=({mode:s,open:t})=>e.jsxs("div",{className:"relative h-5 w-5 px-0.5",children:[e.jsx("div",{className:u("relative top-1 h-[1px] w-full rounded transition-transform",s==="dark"?"bg-white":"bg-slate-950",{"translate-y-[4px] -rotate-45":t})}),e.jsx("div",{className:u("relative top-2 h-[1px] w-full rounded transition-opacity",s==="dark"?"bg-white":"bg-slate-950",{"opacity-0":t})}),e.jsx("div",{className:u("relative top-3 h-[1px] w-full rounded transition-transform",s==="dark"?"bg-white":"bg-slate-950",{"-translate-y-[6px] rotate-45":t})})]}),Ss=({mode:s,menuItems:t,eventHandler:a,handleMobileMenuOpenStateChange:n,ctaButton:r})=>e.jsx(S,{measurementListId:y,elementId:"mobile menu",mainAxis:2,onOpenStateChange:n,boxClassName:"w-full",ariaLabel:"mobile menu",childClassName:"xl:hidden",boxContent:e.jsxs("div",{className:u("z-1000 flex flex-col px-6 py-6 shadow-3xl",s==="dark"?"bg-slate-800":"bg-white"),children:[e.jsxs("a",{href:r.url,onClick:()=>a(`button-${r}`),className:u("flex justify-between gap-2.5 border-b px-1 py-4 text-sm font-bold",s==="dark"?"border-slate-600 text-white":"border-slate-200 text-slate-800"),children:[r.title,e.jsx(ve,{className:"ms-1 h-4 w-4 rtl:rotate-180",strokeWidth:3})]}),t.map(o=>e.jsx(Cs,{mode:s,measurementListId:y,menuId:o.id,menuTitle:o.menuTitle,columns:o.columns,eventHandler:a},o.id))]}),children:o=>e.jsx(M,{isOpen:o,mode:s,children:e.jsx(ys,{mode:s,open:o})})}),Is=({onClose:s})=>{const{t}=b();return e.jsx("div",{className:"flex w-full justify-end bg-white px-4 pt-4 md:block md:pt-0",children:e.jsx(N,{text:t("Close"),className:"right-6 top-6 md:fixed",variant:"tertiary",iconClassName:"size-5",IconRight:K,onClick:s})})},ks=()=>e.jsxs("div",{className:"flex w-full animate-pulse flex-col gap-y-2 *:h-4 *:animate-grow-reset *:rounded *:bg-gray-200",children:[e.jsx("div",{className:"max-w-full"}),e.jsx("div",{className:"max-w-[80%]"}),e.jsx("div",{className:"max-w-[90%]"}),e.jsx("div",{className:"max-w-[50%]"}),e.jsx("div",{className:"mt-4 !h-12 w-1/4 max-w-[25%] animate-grow-reset !rounded-lg"})]}),W="assistant search bar",ne="assistant search results",Ls=()=>{const{t:s}=b();return e.jsxs("div",{className:"flex items-center gap-x-4",children:[e.jsx(F,{loading:"eager",imageSrc:Ce,alt:"nuri",className:"size-8 overflow-clip rounded-lg"}),e.jsx("span",{className:"text-xl font-semibold",children:s("AI overview by Nuri")})]})},T=({children:s,variant:t="white",wrapperClassName:a,className:n})=>e.jsx("div",{className:u("flex justify-center p-4 md:py-8",{"bg-white":t==="white","bg-slate-50":t==="slate"},a),children:e.jsx("div",{className:u("w-full md:w-[60%]",n),children:s})}),As=({onClose:s})=>{const{t}=b(),{onOpenWithNewChat:a}=H(),n=j(i=>i.assistant.search.searchAnswer),r=j(i=>i.assistant.common.isGenerating),o=()=>{a().then(s)};return!r&&n===""?null:e.jsxs(T,{variant:"white",wrapperClassName:"!py-0",className:"relative flex flex-col gap-y-4 rounded-2xl bg-gradient-to-br from-primary-500/10 to-35% p-6 *:z-10 before:absolute before:inset-0 before:rounded-2xl before:bg-gradient-to-bl before:from-blue-500/10 before:to-35%",children:[e.jsx(Ls,{}),n===""?e.jsx(ks,{}):e.jsx(q,{content:n}),!r&&e.jsx(Z,{className:"self-start",text:t("Ask a follow up"),variant:"stroke",IconLeft:ye,iconClassName:"size-5",onClick:o,measurementListId:W,elementId:"new search ui follow up button"})]})},Ms=()=>{const[s,t]=c.useState(""),{onSearchQuerySubmit:a}=H(),n=j(l=>l.assistant.common.isGenerating),r=c.useMemo(()=>xe({measurementListId:W,searchTerm:s}),[s]),o=l=>{l.key==="Enter"&&a(s,r).then()},i=()=>a(s,r);return e.jsxs(T,{className:"flex gap-x-2",children:[e.jsx(Se,{autoFocus:!0,className:"w-full",disabled:n,value:s,onChange:l=>t(l.currentTarget.value),onKeyDown:o}),e.jsx(N,{text:"",bodyClassName:"!px-0",disabled:n||s.length===0,onClick:i,children:e.jsx(Q,{className:"size-5"})})]})},Es=({result:{title:s,url:t,description:a}})=>{const{t:n}=b();return e.jsxs(Ie,{className:"flex w-full flex-col gap-y-4",children:[e.jsx("span",{className:"text-xl font-semibold",children:s}),e.jsx(q,{content:a}),e.jsx(Z,{href:t,target:"_blank",className:"mt-auto w-max",variant:"stroke",text:n("More info"),IconRight:ke,size:"sm",iconClassName:"size-5",measurementListId:ne,elementId:"highlighted search result more info button",context:t})]},s)},Ts=({index:s,result:t})=>{const{title:a,url:n,description:r,dateModified:o}=t,i=Le(o).format("MMM d. Y"),l=()=>{const f=L({measurementListId:ne,elementId:n,positionIndex:s});A(f)};return e.jsx("a",{className:"group rounded-lg p-4 transition-all hover:bg-slate-50",href:n,onClick:l,target:"_blank",children:e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx("span",{className:"text-xl font-semibold group-hover:text-secondary-500",children:a}),r,e.jsx("span",{className:"text-xs text-slate-600",children:i})]},a)})},_s=()=>{const{t:s}=b(),t=j(o=>o.assistant.search.searchResults),a=j(o=>o.assistant.common.isGenerating);if(t===void 0||a)return null;const n=t.slice(0,2),r=t.slice(2);return e.jsxs(e.Fragment,{children:[e.jsx(T,{variant:"white",className:"flex flex-col gap-6 md:flex-row",children:n.map(o=>e.jsx(Es,{result:o},o.title))}),e.jsxs(T,{variant:"white",className:"flex flex-col gap-y-4",children:[r.length>0&&e.jsxs("span",{className:"text-2xl font-semibold",children:[s("Other results")," ",`(${r.length})`]}),r.map((o,i)=>e.jsx(Ts,{index:i,result:o},o.title))]})]})},Rs=({onClose:s})=>e.jsxs("div",{className:"max-h-screen w-screen cursor-auto overflow-y-scroll overscroll-none transition-all",style:{paddingBottom:`${B}px`},children:[e.jsx(Is,{onClose:s}),e.jsx(Ms,{}),e.jsx(As,{onClose:s}),e.jsx(_s,{})]}),Os=()=>e.jsxs("div",{className:"relative",children:[e.jsx(Ae,{className:"absolute left-[4.5px] top-[5px] size-2"}),e.jsx(Q,{className:"size-5"})]}),Bs=({mode:s})=>{const{onSearchOpen:t,onSearchClose:a}=H(),n=c.useRef(null),r=()=>{var i;return(i=n==null?void 0:n.current)==null?void 0:i.openChange()},o=async i=>{if(!i){await t();return}await a()};return e.jsx(S,{ref:n,lockScroll:!0,mainAxis:6,crossAxis:-32,measurementListId:W,onOpenStateChange:o,boxContent:e.jsx(Rs,{onClose:r}),ariaLabel:"search",children:i=>e.jsx(M,{isOpen:i,mode:s,children:e.jsx(Os,{})})})},Ds=({mode:s,eventHandler:t,userMenu:a})=>{const{t:n}=b(),{isLoading:r,numberOfUnreadNotifications:o,user:i,notificationsMenuItemLabel:l,onLogout:f}=Ne(),d=c.useMemo(()=>{if(!i)return a;const x={type:gs,itemTitle:l,url:"/personal-page/notifications",withBadge:o>0,withNewBadge:!1,withHotBadge:!1};return{...a,items:[x,...a.items]}},[l,o,i,a]);return e.jsxs(e.Fragment,{children:[r&&e.jsx("div",{className:"fixed left-0 top-0 z-50 h-full w-full",children:e.jsx(Me,{})}),e.jsx(S,{measurementListId:y,elementId:"user",crossAxis:-32,mainAxis:10,ariaLabel:a.columnTitle,boxContent:e.jsxs("div",{className:"flex flex-col rounded-lg bg-white px-4 py-8 shadow-3xl",children:[e.jsx(_,{columnTitle:d.columnTitle,eventHandler:t,items:d.items}),i&&e.jsx("button",{"aria-label":"Log out",type:"button",className:"flex min-h-11 items-center gap-2.5 rounded-lg px-4 py-1 text-[15px] text-slate-800 outline outline-transparent transition-colors duration-300 hover:bg-slate-100 hover:text-blue-500 focus:outline-blue-500",onClick:()=>{f("/logout")},children:n("Log out")})]}),children:x=>e.jsxs(M,{isOpen:x,mode:s,className:"relative",children:[e.jsx(Ee,{className:"h-5 w-5"}),o>0&&e.jsx(E,{className:"absolute end-3 top-3"})]})})]})},Fs=async()=>{try{return(await V.get("/api/navbar/localization-selector-data")).data}catch(s){throw z("localization selector data fetch error",s),new Error(s)}},zs=async s=>{try{return V.post("/api/set-user-locale",{path:window.location.pathname==="/"?"/":ms(window.location.pathname,"/"),languageCode:s.languageCode,countryId:s.countryId})}catch(t){throw z(t),new Error(t)}},D="show_localisation_changed_notification",re="true",Hs=s=>{const{localisationSelector:t,initialLanguageOption:a,initialCountryId:n}=s,r=De(),[o,i]=c.useState(a.isoCode),[l,f]=c.useState(n),[d,x]=c.useState(!1),h=c.useMemo(()=>Y()?!1:window.innerWidth<P.lg,[]),v=c.useMemo(()=>t.languageOptions.map(m=>({id:m.isoCode,text:m.label})),[t.languageOptions]),w=c.useCallback(async()=>{try{if(!o||!l)return;x(!0);const m=await zs({languageCode:o,countryId:l}),p=t.countries.find(g=>g.id===l),C=L({measurementListId:"navbar language selector confirm",context:JSON.stringify({languageCode:o,countryName:p==null?void 0:p.name})});A(C);const{redirectUrl:k}=m.data;n!==l&&fe(()=>he({key:D,value:re}),pe.Functionality),k?window.location.replace(k):window.location.reload()}catch{x(!1),$("Ooops... We couldn't set the selected options")}},[o,l,t.countries,n]),I=c.useCallback(m=>m&&i(m),[i]);return{rtl:r,isMobileLayout:h,isLoading:d,languageOptions:v,currentCountryId:l,currentLanguageCode:o,onConfirmButtonClick:w,handleLanguageCodeChange:I,setCurrentCountryId:f}},$s=()=>{const{t:s}=b();c.useEffect(()=>{const t=ge(D)===re,a=s("Country updated! You'll now see brokers and recommendations tailored to your location.");t&&($(a),we(D))},[s])},Ws=({currentCountry:s,currentLanguageOption:t})=>{const{t:a}=b(),{isLocalizationDrawerOpen:n,setIsLocalizationDrawerOpen:r}=j(g=>g.localizationDrawer),[o,i]=c.useState({languageOptions:[],countries:[]}),[l,f]=c.useState(!1),{rtl:d,isMobileLayout:x,isLoading:h,languageOptions:v,currentCountryId:w,currentLanguageCode:I,onConfirmButtonClick:m,handleLanguageCodeChange:p,setCurrentCountryId:C}=Hs({localisationSelector:o,initialCountryId:s==null?void 0:s.id,initialLanguageOption:t});c.useEffect(()=>{if(n){const g=L({measurementListId:"localisation selector open"});A(g),be("localisation drawer opened")}},[n]),c.useEffect(()=>{n&&o.countries.length===0&&o.languageOptions.length===0&&(f(!0),Fs().then(g=>{i(g)}).catch(()=>{r(!1),$(a("Oops..., something went wrong"))}).finally(()=>{f(!1)}))},[s,t,p,n,o,C,r,a]);const k=c.useCallback(g=>{if(r(g),!g){const le=L({measurementListId:"localisation selector close"});A(le),p(t.isoCode),C(s==null?void 0:s.id)}},[s,t,p,C,r]);return $s(),e.jsx(Oe,{isOpen:n,setIsOpen:k,isMobile:x,type:d?"left":"right",containerClassName:u("w-full max-w-xl overflow-y-auto sm:rounded-es-lg sm:rounded-ss-lg","contents sm:block"),children:e.jsxs("div",{className:"m-4 mt-12 flex h-min w-auto flex-col gap-8 rounded-lg bg-white p-4 py-8 sm:m-0 sm:min-h-full sm:w-full sm:gap-14 sm:rounded-none sm:p-14 sm:py-14",children:[e.jsxs("div",{className:"flex justify-between text-2xl font-semibold",children:[e.jsx("div",{className:"max-w-64 sm:max-w-none",children:a("Select language & location")}),e.jsx(N,{size:"xs",text:"close",variant:"tertiary",className:"h-10 w-10",onClick:()=>k(!1),children:e.jsx(K,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"font-semibold",children:a("Select your language")}),e.jsx("div",{className:"mt-2 text-sm text-slate-500",children:a("The website is in English by default. Other languages are available with AI translation.")}),e.jsx(Be,{options:v,disableDeselect:!0,className:"mt-4",selectedId:I,onChange:p,disabled:h||l,customControlComponent:Te,customIndicatorSeparatorComponent:()=>null,hideSelectedValueIfMenuIsOpen:!0})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"font-semibold",children:a("Select your country")}),e.jsx("div",{className:"mt-2 text-sm text-slate-500",children:a("Select your country of residence to see available brokers and get personalized recommendations.")}),e.jsx(_e,{countryId:w||-1,countries:o.countries,onSelect:C,disabled:h||l,disableTitle:!0,className:"mt-4"})]}),e.jsx(N,{text:a("Confirm changes"),variant:"primary",className:"sm:w-max",onClick:m,disabled:h||!w,IconRight:h?U:void 0,iconClassName:"h-5 w-5"}),l&&e.jsx("div",{className:"flex justify-center",children:e.jsx(U,{size:"medium"})})]})})},Us=({mode:s,currentCountry:t,currentLanguageOption:a})=>{const{isLocalizationDrawerOpen:n,setIsLocalizationDrawerOpen:r}=j(o=>o.localizationDrawer);return e.jsxs(e.Fragment,{children:[e.jsx(Ws,{currentCountry:t,currentLanguageOption:a}),e.jsx("button",{onClick:()=>r(!n),type:"button","aria-label":"language selector",children:e.jsxs(M,{isOpen:n,mode:s,children:[t&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Re,{isoCode:t.isoCode,className:"size-4 rounded-lg"}),e.jsx("div",{className:"text-xs font-normal uppercase sm:text-sm",children:a.isoCode})]}),!t&&e.jsx(xs,{className:u("h-5 w-5",s==="dark"?"stroke-white":"stroke-slate-800")})]})})]})},Gt=({internalNotification:s,userMenu:t,adminMenu:a,menuItems:n,isSearchEnabled:r,mode:o,isTransparent:i,ctaButton:l,currentCountry:f,currentLanguageOption:d})=>{const x=c.useCallback(m=>{const p=L({measurementListId:y,elementId:m});A(p)},[]),[h,v]=c.useState(i),w=c.useCallback(()=>{v(window.scrollY<=B)},[]),I=c.useCallback(m=>{window.scrollY>B||window.innerWidth>P.xl||v(m)},[]);return c.useEffect(()=>Y()||!i?()=>{}:(w(),window.addEventListener("scroll",w,{passive:!0}),()=>{window.removeEventListener("scroll",w)}),[w,i,o]),e.jsx("header",{className:u({"h-14":!i,"bg-white":o==="light"&&!h,"bg-slate-800":o==="dark"&&!h}),children:e.jsx("nav",{className:u("fixed flex h-14 w-full flex-col justify-center transition-colors duration-150",{"bg-white":o==="light"&&!h,"bg-slate-800":o==="dark"&&!h}),children:e.jsxs(ie,{innerClassName:"flex items-center justify-between gap-6",outerClassName:"overflow-visible",children:[e.jsx(vs,{mode:o,eventHandler:x,internalNotification:s,className:"!ms-0"}),e.jsx("div",{className:"hidden items-stretch gap-6 xl:flex",children:n.map(m=>e.jsx(js,{mode:o,measurementListId:y,menuTitle:m.menuTitle,menuId:m.id,columns:m.columns,eventHandler:x,mainAxis:15},m.id))}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex",children:[r&&e.jsx(Bs,{mode:o}),e.jsx(Ds,{mode:o,eventHandler:x,userMenu:t}),a&&e.jsx(Ns,{mode:o,adminMenu:a}),e.jsx(Us,{mode:o,currentCountry:f,currentLanguageOption:d}),e.jsx(Ss,{mode:o,eventHandler:x,menuItems:n,ctaButton:l,handleMobileMenuOpenStateChange:i?I:void 0})]}),e.jsx(N,{size:"sm",className:"hidden leading-4 xl:block",href:l.url,onClick:()=>x(`button-${l.url}`),text:l.title})]})]})})})};export{Gt as NavBar};
//# sourceMappingURL=NavBar-B2fub_5u.js.map
