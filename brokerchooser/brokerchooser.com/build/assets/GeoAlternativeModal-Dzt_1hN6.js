import{r as i,j as e}from"./Empty-CbVzuLts.js";import{B as b}from"./ButtonOrLink-BXF_cz5f.js";import{y as g}from"./index-BwKToVaI.js";import{e as v,c as h,J as y,u as k,v as j,s as u,a as N}from"./app-core-DsZLvh-T.js";import{D as w}from"./Dialog-Dc9j5dN7.js";import{S as I}from"./Spinner-BVKQZHjL.js";import{T as C}from"./TrackedButtonOrLink-CLY2ep4D.js";import{V as c}from"./VisitBrokerLink-DumHuGb7.js";import{c as M}from"./createTop2Link-Cm09WGPK.js";import{B as f}from"./BrokerLogo-Cl8a35Mt.js";import{S as T}from"./ScoreWithStarAndDecimal-Bff-ezG2.js";import{VisitBrokerButton as L}from"./VisitBrokerButton-BNlwGbUi.js";import{u as p}from"./useTranslation-DBGLPtMT.js";import{T as D}from"./Trans-BnbQ44YL.js";import{F as E}from"./ChevronDoubleRightIcon-KPVaPs8-.js";import{F as S}from"./ArrowsRightLeftIcon-C7qd3kp1.js";import{F as _}from"./XMarkIcon-zYCpwGN2.js";import"./index-C6HkmSz0.js";import"./ArrowRightIcon-BPHA_4Zr.js";import"./clsx-CA07h-Wh.js";import"./preload-helper-9zrlRb12.js";import"./_baseIsEqual-BU7ud4ak.js";import"./floating-ui.react-CDjzeHtS.js";import"./floating-ui.dom-cvZeYP3P.js";import"./index-B_BLzt9w.js";import"./BaseIcon-wXEPPWk8.js";import"./useMeasureImpression-Crl5RCea.js";import"./useHumanEyeEffect-CrozREcw.js";import"./isEqual-jqLKjBFs.js";import"./ImpressionHandler-DnZ_lI5K.js";import"./getCloakedVisitBrokerUrlWithQueryParams-BNzLyufl.js";import"./getAbTests-sg48PVrR.js";import"./useBCClientSideData-CaltDZgi.js";import"./Image-Cq_3T_IK.js";import"./getScoreColorTextClass-CBK1cLHc.js";import"./StarIcon-BnvtLgHV.js";import"./utils-B1GDy_RR.js";try{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new t.Error().stack;a&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[a]="bec85981-da8c-4338-a644-1a08b9c32392",t._sentryDebugIdIdentifier="sentry-dbid-bec85981-da8c-4338-a644-1a08b9c32392")}catch{}{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t._sentryModuleMetadata=t._sentryModuleMetadata||{},t._sentryModuleMetadata[new t.Error().stack]=Object.assign({},t._sentryModuleMetadata[new t.Error().stack],{"_sentryBundlerPluginAppKey:bc-frontend":!0})}const B=async t=>{const{brokerId:a,signal:s}=t;try{return(await v.post("/api/broker/geo_alternative_modal",{brokerId:a,countryId:h().countryId},{signal:s})).data}catch(o){throw y(o,{brokerId:a}),new Error(o)}},z=({broker:t,alternativeBroker:a,countryTranslatedTheName:s})=>{const{t:o}=p(),{href:l}=i.useMemo(()=>M(t,a),[a,t]),r=i.useMemo(()=>`originalBroker: ${t.name}`,[t.name]);return e.jsxs("div",{className:"flex flex-col items-center gap-4 p-4 sm:p-6",children:[e.jsx("h1",{className:"title-3 mx-10 text-center","data-testid":"geo-alternative-modal-title",children:o("[brokerName] isnâ€™t available in [countryTranslatedTheName]",{brokerName:t.name,countryTranslatedTheName:s})}),e.jsxs("div",{className:"flex flex-col items-center gap-0.5 text-center",children:[e.jsx("div",{className:"font-semibold",children:e.jsxs(D,{i18nKey:"Best alternative for you: <1>[alternativeBrokerName]</1>",values:{alternativeBrokerName:a.name},children:["Best alternative for you: ",e.jsx(c,{broker:a,measurementListId:"geo alternative modal visit alternative name link in description",measurementContext:r,className:"underline decoration-dotted underline-offset-[3px] text-blue-500 decoration-blue-500 hover:text-blue-600 hover:decoration-blue-600",testId:"alternative-broker-name-link-in-description",children:a.name})]})}),e.jsx("div",{children:o("Check out this top available option or compare the two side by side!")})]}),e.jsxs("div",{className:"w-full rounded-lg bg-white p-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx(f,{broker:t,className:"size-9"}),e.jsx(E,{className:"size-8"}),e.jsx(c,{broker:a,measurementListId:"geo alternative modal visit alternative logo link",measurementContext:r,testId:"alternative-broker-logo-link",children:e.jsx(f,{broker:a,logoSizeClassName:"size-14"})})]}),e.jsx(c,{broker:a,measurementListId:"geo alternative modal visit alternative name link",measurementContext:r,className:"mt-2 block text-lg font-semibold",testId:"visit-alternative-name-link",children:a.name}),e.jsx(T,{score:a.overallScore,scoreTextOverride:o("Score")})]}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsxs("div",{className:"w-full sm:w-max",children:[e.jsx(C,{text:o("Compare"),measurementListId:"geo alternative modal compare button",href:l,context:JSON.stringify({brokerId:t.id,alternativeBrokerId:a.id}),variant:"stroke",IconRight:S,iconClassName:"size-5",size:"md",className:"max-h-8 w-full sm:max-h-10",testId:"compare-button"}),e.jsx("div",{className:"mt-2 w-full sm:w-max",children:e.jsx(L,{broker:a,buttonText:o("Visit alternative"),measurementListId:"geo alternative modal visit alternative button",measurementContext:r,className:"w-full",rootClassName:"!w-full"})})]})})]})]})},he=()=>{const{t}=p(),{brokerId:a,setBrokerId:s}=k(n=>n.geoAlternativeModal),[o,l]=i.useState(null),r=i.useRef(null);i.useEffect(()=>{if(!a)return;l(null);const n=new AbortController;r.current=n,B({brokerId:a,signal:n.signal}).then(d=>{l(d);const x=j({measurementListId:"geo alternative modal",context:JSON.stringify({broker:d.broker.name,alternativeBroker:d.alternativeBroker.name})});u(x)}).catch(()=>{l(null),s(void 0),g(t("Oops..., something went wrong"))})},[a]);const m=i.useCallback(()=>{r.current&&r.current.abort(),s(void 0);const n=N({measurementListId:"close geo alternative modal"});u(n)},[s]);return e.jsxs(w,{isComponentVisible:!!a,onDialogClose:m,dialogClasses:"bg-slate-100 rounded-lg relative min-w-40 min-h-40 flex justify-center items-center",testId:"geo-alternative-modal",children:[e.jsx(b,{text:"close modal",onClick:m,variant:"tertiary",className:"absolute end-0.5 top-0.5 size-12 sm:end-1 sm:top-1",testId:"geo-alternative-modal-close-button",children:e.jsx(_,{className:"size-5 rounded border-slate-200 sm:size-6"})}),o?e.jsx(z,{broker:o.broker,alternativeBroker:o.alternativeBroker,countryTranslatedTheName:o.countryTranslatedTheName}):e.jsx(I,{size:"small",testId:"geo-alternative-modal-spinner"})]})};export{he as GeoAlternativeModal};
//# sourceMappingURL=GeoAlternativeModal-Dzt_1hN6.js.map
