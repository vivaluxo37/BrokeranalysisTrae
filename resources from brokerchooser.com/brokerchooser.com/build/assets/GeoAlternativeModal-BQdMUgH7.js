import{r as i,j as e}from"./Empty-CbVzuLts.js";import{B as g}from"./ButtonOrLink-D4Exnhzb.js";import{y as b}from"./index-BwKToVaI.js";import{e as v,c as h,J as y,u as j,v as k,s as u,a as N}from"./app-core-EgTwV6RV.js";import{D as w}from"./Dialog-Bade9M5v.js";import{S as C}from"./Spinner-BiL9IDSr.js";import{T as I}from"./TrackedButtonOrLink-BVUeBWj1.js";import{V as c}from"./VisitBrokerLink-CtJVpQFS.js";import{c as M}from"./createTop2Link-BKKEkfB2.js";import{B as f}from"./BrokerLogo-Cl8a35Mt.js";import{S as T}from"./ScoreWithStarAndDecimal-CrF5nzm4.js";import{VisitBrokerButton as L}from"./VisitBrokerButton-CtARdCW4.js";import{u as p}from"./useTranslation-CTw6fB9C.js";import{T as D}from"./Trans-0W9_kK1y.js";import{F as E}from"./ChevronDoubleRightIcon-KPVaPs8-.js";import{F as S}from"./ArrowsRightLeftIcon-C7qd3kp1.js";import{F as _}from"./XMarkIcon-zYCpwGN2.js";import"./index-C6HkmSz0.js";import"./ArrowRightIcon-BPHA_4Zr.js";import"./clsx-CA07h-Wh.js";import"./preload-helper-9zrlRb12.js";import"./_baseIsEqual-BU7ud4ak.js";import"./floating-ui.react-CDjzeHtS.js";import"./floating-ui.dom-cvZeYP3P.js";import"./index-B_BLzt9w.js";import"./BaseIcon-wXEPPWk8.js";import"./useMeasureImpression-DLomcjwT.js";import"./useHumanEyeEffect-Cz2xB1RS.js";import"./isEqual-jqLKjBFs.js";import"./ImpressionHandler-BjQTuZUR.js";import"./getCloakedVisitBrokerUrlWithQueryParams-BNzLyufl.js";import"./getAbTests-t33apssF.js";import"./useBCClientSideData-CPCBJiaN.js";import"./Image-Cq_3T_IK.js";import"./getScoreColorTextClass-CBK1cLHc.js";import"./StarIcon-BnvtLgHV.js";import"./utils-B1GDy_RR.js";try{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},r=new t.Error().stack;r&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[r]="c048ea72-26c0-485e-8766-6cf11d20081c",t._sentryDebugIdIdentifier="sentry-dbid-c048ea72-26c0-485e-8766-6cf11d20081c")}catch{}{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t._sentryModuleMetadata=t._sentryModuleMetadata||{},t._sentryModuleMetadata[new t.Error().stack]=Object.assign({},t._sentryModuleMetadata[new t.Error().stack],{"_sentryBundlerPluginAppKey:bc-frontend":!0})}const B=async t=>{const{brokerId:r,signal:s}=t;try{return(await v.post("/api/broker/geo_alternative_modal",{brokerId:r,countryId:h().countryId},{signal:s})).data}catch(o){throw y(o,{brokerId:r}),new Error(o)}},z=({broker:t,alternativeBroker:r,countryTranslatedTheName:s})=>{const{t:o}=p(),{href:l}=i.useMemo(()=>M(t,r),[r,t]),a=i.useMemo(()=>`originalBroker: ${t.name}`,[t.name]);return e.jsxs("div",{className:"flex flex-col items-center gap-4 p-4 sm:p-6",children:[e.jsx("h1",{className:"title-3 mx-10 text-center",children:o("[brokerName] isnâ€™t available in [countryTranslatedTheName]",{brokerName:t.name,countryTranslatedTheName:s})}),e.jsxs("div",{className:"flex flex-col items-center gap-0.5 text-center",children:[e.jsx("div",{className:"font-semibold",children:e.jsxs(D,{i18nKey:"Best alternative for you: <1>[alternativeBrokerName]</1>",values:{alternativeBrokerName:r.name},children:["Best alternative for you: ",e.jsx(c,{broker:r,measurementListId:"geo alternative modal visit alternative name link in description",measurementContext:a,className:"underline decoration-dotted underline-offset-[3px] text-blue-500 decoration-blue-500 hover:text-blue-600 hover:decoration-blue-600",children:r.name})]})}),e.jsx("div",{children:o("Check out this top available option or compare the two side by side!")})]}),e.jsxs("div",{className:"w-full rounded-lg bg-white p-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx(f,{broker:t,className:"size-9"}),e.jsx(E,{className:"size-8"}),e.jsx(c,{broker:r,measurementListId:"geo alternative modal visit alternative logo link",measurementContext:a,children:e.jsx(f,{broker:r,logoSizeClassName:"size-14"})})]}),e.jsx(c,{broker:r,measurementListId:"geo alternative modal visit alternative name link",measurementContext:a,className:"mt-2 block text-lg font-semibold",children:r.name}),e.jsx(T,{score:r.overallScore,scoreTextOverride:o("Score")})]}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsxs("div",{className:"w-full sm:w-max",children:[e.jsx(I,{text:o("Compare"),measurementListId:"geo alternative modal compare button",href:l,context:JSON.stringify({brokerId:t.id,alternativeBrokerId:r.id}),variant:"stroke",IconRight:S,iconClassName:"size-5",size:"md",className:"max-h-8 w-full sm:max-h-10"}),e.jsx("div",{className:"mt-2 w-full sm:w-max",children:e.jsx(L,{broker:r,buttonText:o("Visit alternative"),measurementListId:"geo alternative modal visit alternative button",measurementContext:a,className:"w-full",rootClassName:"!w-full"})})]})})]})]})},he=()=>{const{t}=p(),{brokerId:r,setBrokerId:s}=j(n=>n.geoAlternativeModal),[o,l]=i.useState(null),a=i.useRef(null);i.useEffect(()=>{if(!r)return;l(null);const n=new AbortController;a.current=n,B({brokerId:r,signal:n.signal}).then(d=>{l(d);const x=k({measurementListId:"geo alternative modal",context:JSON.stringify({broker:d.broker.name,alternativeBroker:d.alternativeBroker.name})});u(x)}).catch(()=>{l(null),s(void 0),b(t("Oops..., something went wrong"))})},[r]);const m=i.useCallback(()=>{a.current&&a.current.abort(),s(void 0);const n=N({measurementListId:"close geo alternative modal"});u(n)},[s]);return e.jsxs(w,{isComponentVisible:!!r,onDialogClose:m,dialogClasses:"bg-slate-100 rounded-lg relative min-w-40 min-h-40 flex justify-center items-center",children:[e.jsx(g,{text:"remove all items",onClick:m,variant:"tertiary",className:"absolute end-0.5 top-0.5 size-12 sm:end-1 sm:top-1",children:e.jsx(_,{className:"size-5 rounded border-slate-200 sm:size-6"})}),o?e.jsx(z,{broker:o.broker,alternativeBroker:o.alternativeBroker,countryTranslatedTheName:o.countryTranslatedTheName}):e.jsx(C,{size:"small"})]})};export{he as GeoAlternativeModal};
//# sourceMappingURL=GeoAlternativeModal-BQdMUgH7.js.map
