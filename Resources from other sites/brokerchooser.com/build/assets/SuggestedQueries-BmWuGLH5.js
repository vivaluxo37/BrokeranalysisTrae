var R=Object.defineProperty;var M=(e,t,s)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var o=(e,t,s)=>M(e,typeof t!="symbol"?t+"":t,s);import{r as n,j as r}from"./Empty-CbVzuLts.js";import{B as j}from"./ButtonOrLink-D4Exnhzb.js";import{I as C}from"./Input-CqPMj87y.js";import{c as b}from"./index-C6HkmSz0.js";import{i as L}from"./getAbTests-t33apssF.js";import{T as D}from"./TrackedButtonOrLink-BVUeBWj1.js";import{T as O}from"./Tooltip-DyzDukgF.js";import{u as g,g as A,i as B,W as P,O as F,a as W}from"./app-core-EgTwV6RV.js";import{u as v}from"./useTranslation-CTw6fB9C.js";import{u as k,l as G,m as V,a as H,d as Q}from"./useAssistantInteractions-DogJRINF.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="ce243ce4-0bd1-4a25-98fb-963ee3c57b5f",e._sentryDebugIdIdentifier="sentry-dbid-ce243ce4-0bd1-4a25-98fb-963ee3c57b5f")}catch{}{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:bc-frontend":!0})}function K({title:e,titleId:t,...s},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"}))}const U=n.forwardRef(K);function Y({title:e,titleId:t,...s},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z"}))}const z=n.forwardRef(Y);function $({title:e,titleId:t,...s},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}const q=n.forwardRef($);function Z({title:e,titleId:t,...s},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const X=n.forwardRef(Z),J=()=>L({abTestName:"purple-nuri-fake-door-test",variantName:"voice-conversation"});var d=(e=>(e.VOICE_MESSAGE="voice message",e.EDIT_QUESTION="edit question",e.COPY_RESPONSE="copy response",e))(d||{});const ee=({variant:e=d.VOICE_MESSAGE})=>{const{t}=v(),s=g(i=>i.assistant.common.actions.setFakeDoorModalVariantToDisplay),a={[d.VOICE_MESSAGE]:t("Switch to voice conversation"),[d.COPY_RESPONSE]:t("Copy this response"),[d.EDIT_QUESTION]:t("Edit or refine the question")}[e];return r.jsx(O,{content:a,trackingProps:{measurementListId:"assistant fake door button tooltip"},children:r.jsxs(D,{text:"",variant:"tertiary",className:"w-min !p-2",bodyClassName:"!px-0",onClick:()=>s(e),measurementListId:"assistant fake door button",elementId:e,children:[e===d.VOICE_MESSAGE&&r.jsx(z,{className:"size-5 stroke-slate-400"}),e===d.EDIT_QUESTION&&r.jsx(X,{className:"size-5 stroke-slate-400"}),e===d.COPY_RESPONSE&&r.jsx(U,{className:"size-5 stroke-slate-400"})]})})};var x=(e=>(e.FEEDBACK="feedback",e.FEEDBACK_FOLLOW_UP="feedback_follow_up",e))(x||{});const te=2e4;class se{constructor(){o(this,"modalBodyRef",null);o(this,"inputRef",null);o(this,"inactivityTimeout");o(this,"isListeningToInactivity",!1);o(this,"setModalBodyRef",t=>{this.modalBodyRef=t});o(this,"removeModalBodyRef",()=>{this.modalBodyRef=null});o(this,"setInputRef",t=>{this.inputRef=t});o(this,"removeInputRef",()=>{this.inputRef=null});o(this,"startListeningForInactivity",()=>{var t,s,a,i;(s=(t=this.modalBodyRef)==null?void 0:t.current)==null||s.addEventListener("click",this.resetInactivityTimer),(i=(a=this.inputRef)==null?void 0:a.current)==null||i.addEventListener("input",this.resetInactivityTimer),this.startInactivityTimer(),this.isListeningToInactivity=!0});o(this,"stopListeningForInactivity",()=>{var t,s,a,i;this.stopInactivityTimer(),(s=(t=this.modalBodyRef)==null?void 0:t.current)==null||s.removeEventListener("click",this.resetInactivityTimer),(i=(a=this.inputRef)==null?void 0:a.current)==null||i.removeEventListener("input",this.resetInactivityTimer),this.isListeningToInactivity=!1});o(this,"resetInactivityTimer",()=>{this.stopInactivityTimer(),this.startInactivityTimer()});o(this,"handleInactivity",()=>{this.stopListeningForInactivity(),A.getState().assistant.chat.actions.appendNewSystemMessage(x.FEEDBACK)});o(this,"stopInactivityTimer",()=>{this.inactivityTimeout&&clearTimeout(this.inactivityTimeout)});o(this,"startInactivityTimer",()=>{this.inactivityTimeout=setTimeout(()=>{this.handleInactivity()},te)})}}const T=new se,ne=()=>{const e=g(u=>u.assistant.common.isGenerating),t=g(u=>u.assistant.common.view),s=g(u=>u.assistant.common.connectionStatus),[a,i]=n.useState(""),l=n.useMemo(()=>!B()&&s===P.CONNECTED,[s]),m=n.useMemo(()=>F.has(t)&&(e||!l),[e,l,t]);return{input:a,isInputDisabled:m,setInput:i}},he=({autoFocus:e=!1,className:t,hideDisclaimer:s=!1,inputClassName:a,mode:i="light",newChatOnSubmit:l=!0,placeholder:m,enableFakeDoor:u=!1})=>{const{t:I}=v(),{input:c,isInputDisabled:E,setInput:f}=ne(),{onContinueChat:p,onOpenWithNewChat:h,queryError:S}=k(),w=n.useRef(null);n.useEffect(()=>(T.setInputRef(w),()=>{T.removeInputRef()}),[]);const N=n.useCallback(async()=>{l?await h(c):await p(c),f("")},[c,l,p,h,f]),_=n.useCallback(async y=>{y.key==="Enter"&&(y.preventDefault(),l?await h(c):await p(c),f(""))},[c,l,p,h,f]);return r.jsxs("div",{className:b("flex shrink-0 flex-col items-center gap-y-6 rounded-3xl p-4 !pt-0 lg:p-8 lg:ps-0",t),children:[r.jsxs("div",{className:"flex w-full items-start gap-x-2",children:[r.jsx(C,{IconRight:J()&&u?ee:void 0,ref:w,autoFocus:e,className:b("w-full rounded-lg",E?"bg-slate-100":"bg-white",a),disabled:E,onChange:y=>f(y.currentTarget.value),onKeyDown:_,placeholder:m||I("How can I help? Iâ€™m all ears!"),value:c,errorDescription:S}),r.jsx(j,{text:"Submit",mode:i,size:"md",variant:"primary",className:"flex-grow py-3.5",bodyClassName:"!px-0 flex-grow py-px",disabled:E||c.length===0,onClick:N,children:r.jsx(q,{className:"size-5 rtl:scale-x-[-1]"})})]}),!s&&r.jsx("div",{className:"text-center text-xs text-slate-500",children:I("Nuri helps with data on 100+ brokers but may make mistakes.")})]})},ye=()=>{const{t:e}=v(),t=n.useMemo(()=>[{text:e("What are the fees at IBKR?"),emoji:"ðŸ’°"},{text:e("Does Lightyear pay interest on uninvested cash?"),emoji:"âš¡"},{text:e("What is the best broker for beginners?"),emoji:"ðŸš€"}],[e]),s=n.useMemo(()=>[{text:e("What does â€˜regulationâ€™ mean?"),emoji:"ðŸ›"},{text:e("How do I know if a broker is a scam?"),emoji:"âš ï¸"},{text:e("Which are the best online brokers?"),emoji:"ðŸ¤©"}],[e]);return{suggestedQueries:t,entryPointQueries:s}},ge=({queries:e,className:t})=>{const{onOpenWithNewChat:s}=k(),a=async(i,l)=>{await s(i,W({measurementListId:l?`${G}_${l}`:V,elementId:H,context:Q}))};return r.jsx("div",{className:b(t,"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3"),children:e.map(({text:i,emoji:l},m)=>r.jsxs("button",{type:"button",className:"flex w-full min-w-0 items-center justify-center gap-2 text-wrap break-words rounded-lg border border-slate-200 bg-white p-2 text-left text-sm hover:border-slate-400 hover:drop-shadow-md",onClick:()=>a(i,m+1),children:[r.jsx("span",{className:"text-xl",children:l}),i]},i))})};export{he as A,d as F,ge as S,ee as T,x as a,T as f,ye as u};
//# sourceMappingURL=SuggestedQueries-BmWuGLH5.js.map
