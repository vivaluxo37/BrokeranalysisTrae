self.studioLoader.context.evalInContext("window.STUDIO_SDK_START=+new Date();E(\"ima.legacy.common.ErrorUtils\");var Kq={},Lq=/OS (\\S+) like/,Mq=/Android (\\S+);/;function Nq(a,b){Kq[b]==null&&((a=a.exec(tb()))?(a=a[1].replace(/_/g,\".\"),Kq[b]=pb(a,b)>=0):Kq[b]=!1);return Kq[b]};var Oq=function(){M.call(this);this.j=!1;this.S=E(\"ima.legacy.common.MouseAndTouchEventTracker\");this.l=this.o=!1;this.h=0;this.v=[];this.B=!1};p(Oq,M);var Pq=function(a,b){b==null||a.j||(a.g=b,a.D=!kc&&!lc,a.F=kc||lc,a.D?a.g.addEventListener(\"click\",v(a.A,a),!1):a.F?(a.g.addEventListener(\"touchstart\",v(a.N,a),!1),a.g.addEventListener(\"touchmove\",v(a.I,a),!1),a.g.addEventListener(\"touchend\",v(a.J,a),!1)):Re(a.S,\"Neither click nor touch is supported in this platform.\"),a.j=!0)},Qq=function(a){a.g!=null&&a.j&&(a.j=!1,a.D?a.g.removeEventListener(\"click\",v(a.A,a),!1):a.F&&(a.g.removeEventListener(\"touchstart\",v(a.N,a),!1),a.g.removeEventListener(\"touchmove\",v(a.I,a),!1),a.g.removeEventListener(\"touchend\",v(a.J,a),!1)))};Oq.prototype.N=function(a){this.o=!0;this.h=a.touches.length;this.B=Rq(this,a.touches)||a.touches.length!=1;a=a.touches;this.v=[];for(var b=0;b<a.length;b++)this.v.push(a[b].identifier)};Oq.prototype.I=function(a){this.l=!0;this.h=a.touches.length};Oq.prototype.J=function(a){this.o&&this.h==1&&!this.l&&!this.B&&Rq(this,a.changedTouches)&&this.dispatchEvent(new Hi(\"click\"));this.h=a.touches.length;this.h==0&&(this.l=this.o=!1)};Oq.prototype.A=function(){this.dispatchEvent(new Hi(\"click\"))};var Rq=function(a,b){for(var c=0;c<b.length;c++)if(a.v.includes(b[c].identifier))return!0;return!1};var Sq=function(a){Hi.call(this,a)};p(Sq,Hi);var Tq=function(){M.call(this)};p(Tq,M);var Uq=function(){M.call(this);this.v=E(\"ima.legacy.vast.VideoDisplayEventTracker\");this.l=new L;this.A=new Oq;this.B=\"none\"};p(Uq,M);Uq.prototype.C=function(){Vq(this);M.prototype.C.call(this)};var Vq=function(a){a.h!=null&&a.h.dispose();a.o!=null&&a.o.dispose();a.g!=null&&Wq(a.g);a.l.clear();Qq(a.A)},Z=function(a,b,c){c&&a.l.get(b)!=null||(a.l.set(b,!0),G(a.v,\"dispatching event \"+b),a.dispatchEvent(new Sq(b)))},Xq=function(a,b){a.l.get(b)!=null&&(G(a.v,\"removing event \"+b),a.l.delete(b))};h=Uq.prototype;h.Ed=function(){a:{var a=this.g;if(a.g.seeking&&!a.o)a.o=!0,a.v=Yq(a);else{if(!a.g.seeking&&a.o){a.o=!1;var b=a.g.currentTime!=0&&a.g.currentTime<a.v;a.v=-1;break a}if(!a.g.seeking&&a.g.currentTime!=0&&Yq(a)>a.g.currentTime){b=Yq(a)-a.g.currentTime>.5;break a}}b=!1}a=Zq(this.g);if(b&&(Z(this,\"rewind\",!1),a!=-1)){Yq(this.g)>=a*.75||Xq(this,\"thirdquartile\");Yq(this.g)>=a*.5||Xq(this,\"midpoint\");Yq(this.g)>=a*.25||Xq(this,\"firstquartile\");a:{b=this.g;for(var c=b.j.Y(),d=c.length-1;d>=0;d--)if(c[d]<.5){c=b.j;c=c.ka()==0?null:c.get(c.ka()-1);b.j.clear();c>=.5&&b.j.add(c);b=!0;break a}b=!1}b&&Z(this,\"replay\",!1)}a!=-1&&(Yq(this.g)>=a*.25&&Z(this,\"firstquartile\",!0),Yq(this.g)>=a*.5&&Z(this,\"midpoint\",!0),Yq(this.g)>=a*.75&&Z(this,\"thirdquartile\",!0))};h.Dd=function(){Z(this,\"creativeview\",!0);this.D!=null?(this.h.listen(this.A,\"click\",this.zd,!1),Pq(this.A,this.D)):this.h.listen(this.g,\"click\",this.Re);Z(this,\"start\",!0);(this.g.g.muted||this.g.g.volume==0)&&Z(this,\"mute\",!1)};h.Fd=function(){var a=this.g.g.muted,b=this.g.g.volume,c=this.j;c.h&&!a||!a&&c.volume==0&&b>0?Z(this,\"unmute\",!1):this.j.muted(a,b)&&Z(this,\"mute\",!1);this.j.h=a;this.j.volume=b};h.Cd=function(){if(this.g.g.ended)Z(this,\"complete\",!0);else{var a;if(a=this.B==\"pausedAtBeginning\")a=this.g,a=!isNaN(a.g.duration)&&a.g.duration>0&&a.g.currentTime==0;a?Z(this,\"stop\",!0):$q(this.g)&&!this.g.g.seeking&&(this.j.paused=!0,Z(this,\"pause\",!1))}};h.Qe=function(){this.j.paused&&(this.j.paused=!1,Z(this,\"resume\",!1))};h.Ad=function(){var a=this.g;if(!mc||mc&&Nq(Mq,2.3))a=!0;else{var b=a.g.duration-Yq(a);a=a.g.currentTime==0&&b<=1.5}a?this.B==\"pausedAtEnd\"&&$q(this.g)?Z(this,\"stop\",!0):Z(this,\"complete\",!0):(G(this.v,\"Pausing video..\"),this.g.pause())};h.zd=function(){Z(this,\"click\",!1)};h.Bd=function(){Z(this,\"error\",!1)};h.Re=function(){Z(this,\"click\",!1)};h.ic=function(){this.j.g=!0;Z(this,\"fullscreen\",!1)};h.hc=function(){this.j.g=!1};h.Pe=function(){var a=ar(this.g),b=br(this.g),c=this.j;if(a.width!=c.width||a.height!=c.height)!this.j.g&&b?this.ic():this.j.g&&!b&&this.hc(),this.j.width=a.width,this.j.height=a.height};var cr=function(a){this.width=ar(a).width;this.height=ar(a).height;this.paused=!1;this.h=a.g.muted;this.g=br(a);this.volume=a.g.volume};cr.prototype.muted=function(a,b){return!this.h&&a||this.volume>0&&b==0};var dr=function(){this.h=0;this.g=[]};h=dr.prototype;h.add=function(a){var b=this.g[this.h];this.g[this.h]=a;this.h=(this.h+1)%4;return b};h.get=function(a){a=er(this,a);return this.g[a]};h.set=function(a,b){a=er(this,a);this.g[a]=b};h.ka=function(){return this.g.length};h.clear=function(){this.h=this.g.length=0};h.Y=function(){var a=this.ka(),b=this.ka(),c=[];for(a=this.ka()-a;a<b;a++)c.push(this.get(a));return c};h.Ga=function(){for(var a=[],b=this.ka(),c=0;c<b;c++)a[c]=c;return a};h.ja=function(a){return a<this.ka()};h.Wa=function(a){for(var b=this.ka(),c=0;c<b;c++)if(this.get(c)==a)return!0;return!1};var er=function(a,b){if(b>=a.g.length)throw Error(\"Out of bounds exception\");return a.g.length<4?b:(a.h+Number(b))%4};var fr=function(a){M.call(this);this.g=a;this.j=new dr;this.v=-1;this.A=this.o=!1};p(fr,Tq);var Zq=function(a){return isNaN(a.g.duration)?-1:a.g.duration};fr.prototype.play=function(){pj(this.g.play,0,this.g)};fr.prototype.pause=function(){this.g.pause()};var $q=function(a){return a.g.paused?kc||lc||nc?a.g.currentTime<a.g.duration:!0:!1},br=function(a){return kc?a.g.webkitSupportsFullscreen&&a.g.webkitDisplayingFullscreen:a.g.offsetWidth>=document.body.offsetWidth&&a.g.offsetHeight>=document.body.offsetHeight},Yq=function(a){for(a=a.j.Y();a.length;){var b=a.pop();if(b>0)return b}return-1},ar=function(a){return new Xe(a.g.offsetWidth,a.g.offsetHeight)};fr.prototype.C=function(){Tq.prototype.C.call(this);Wq(this)};var Wq=function(a){a.l!=null&&(Qq(a.l),a.l=null);a.h!=null&&(a.h.dispose(),a.h=null);a.v=-1;a.A=!1;a.o=!1;a.j.clear()},gr=function(a,b){a.A||(a.A=!0,a.dispatchEvent(\"start\"),!mc&&(!kc||(kc||lc)&&Nq(Lq,4))||a.jc(b))};h=fr.prototype;h.Oe=function(){oc&&(this.g.currentTime=.001)};h.Wc=function(a){this.dispatchEvent(\"play\");kc||lc||gr(this,a)};h.Ld=function(a){this.A||((kc||lc)&&this.g.currentTime>0&&gr(this,a),bc&&this.Wc(a));this.j.add(this.g.currentTime);this.dispatchEvent(\"timeUpdate\")};h.Md=function(){this.dispatchEvent(\"volumeChange\")};h.Kd=function(){this.dispatchEvent(\"pause\")};h.Hd=function(){this.dispatchEvent(\"end\")};h.jc=function(){this.dispatchEvent(\"beginFullscreen\")};h.Jd=function(){this.dispatchEvent(\"endFullscreen\")};h.Id=function(){this.dispatchEvent(\"error\")};h.Gd=function(){this.dispatchEvent(\"click\")};var hr=function(a){this.A=a;this.s=this.l=!0;this.j=new Uq;this.j.B=\"pausedAtBeginning\";this.o=this.g=this.h=null;bn(v(this.Z,this))},jr=function(a){var b=ir.get(a);b==null&&(b=new hr(a),ir.set(a,b));return b};hr.prototype.Z=function(a){this.g=a;kr(this)};var kr=function(a){lr(a,!1);lr(a,!0);if(a.g!=null&&a.o!=null){var b=a.j,c=a.h;Vq(b);b.g=c;c=b.g;Wq(c);c.h=new N(c);c.h.listen(c.g,\"canplay\",c.Oe);c.h.listen(c.g,\"ended\",c.Hd);c.h.listen(c.g,\"webkitbeginfullscreen\",c.jc);c.h.listen(c.g,\"webkitendfullscreen\",c.Jd);c.h.listen(c.g,\"pause\",c.Kd);c.h.listen(c.g,\"playing\",c.Wc);c.h.listen(c.g,\"timeupdate\",c.Ld);c.h.listen(c.g,\"volumechange\",c.Md);c.h.listen(c.g,\"error\",c.Id);c.l=new Oq;c.h.listen(c.l,\"click\",c.Gd,!1);Pq(c.l,c.g);b.j=new cr(b.g);b.D=null;b.h=new N(b);b.h.listen(b.g,\"timeUpdate\",b.Ed,!1);b.h.listen(b.g,\"volumeChange\",b.Fd,!1);b.h.listen(b.g,\"pause\",b.Cd,!1);b.h.listen(b.g,\"play\",b.Qe,!1);b.h.listen(b.g,\"end\",b.Ad,!1);b.h.listen(b.g,\"beginFullscreen\",b.ic,!1);b.h.listen(b.g,\"endFullscreen\",b.hc,!1);b.h.listen(b.g,\"start\",b.Dd,!1);b.h.listen(b.g,\"error\",b.Bd,!1);b.o=new nj(1E3);ak(b.h,b.o,\"tick\",b.Pe,!1,b);b.o.start();a.h.listen(\"timeUpdate\",a.nd,!1,a);a.o.paused?a.j.listen(\"start\",a.yb,!1,a):a.yb()}},lr=function(a,b){mr(a,b,\"resume\",a.yb);mr(a,b,\"replay\",a.Ze);mr(a,b,\"pause\",a.Te);mr(a,b,\"stop\",a.qf);mr(a,b,\"mute\",a.Ne);mr(a,b,\"unmute\",a.uf);mr(a,b,\"firstquartile\",a.fe);mr(a,b,\"midpoint\",a.Me);mr(a,b,\"thirdquartile\",a.sf);mr(a,b,\"complete\",a.Ud)},mr=function(a,b,c,d){(b?a.j.listen:a.j.Ta).call(a.j,c,d,!1,a)};h=hr.prototype;h.yb=function(){this.j.Ta(\"start\",this.yb,!1,this);this.g.dispatchEvent(new P(\"videoStart\"));nr(this,\"play\",!this.v);or(this,\"Start\");this.v=!1;this.g!=null&&this.s&&!this.D&&(this.g.v(),this.D=!0)};h.Ze=function(){nr(this,\"replay\",!0);or(this,\"Stop\");this.l=!1};h.Te=function(){nr(this,\"pause\",!0);or(this,\"Stop\")};h.qf=function(){nr(this,\"stop\",!0);or(this,\"Stop\");this.l=!1};h.Ne=function(){nr(this,\"mute\",!this.v)};h.uf=function(){nr(this,\"unmute\",!this.v)};h.fe=function(){nr(this,\"firstquartile\")};h.Me=function(){nr(this,\"midpoint\")};h.sf=function(){nr(this,\"thirdquartile\")};h.Ud=function(){nr(this,\"complete\");or(this,\"Stop\");this.l=!1;this.g!=null&&this.s&&!this.B&&(this.g.v(),this.B=!0)};h.nd=function(a){var b=this.A;a=\"EVENT_VIDEO_\"+a.type.toUpperCase();Q(this.g.H,\"updateVideoProgress\",[a,Zq(this.h),this.h.g.currentTime]);J.info('Video \"'+b+'\" dispatching \"'+a+'\" event.')};var nr=function(a,b,c){a.g!=null&&a.s&&(c&&a.g.ma(\"Count\",a.A,\"EVENT_VIDEO_INTERACTION\"),a.g.ma(\"Count\",a.A,\"EVENT_VIDEO_\"+b.toUpperCase()))},or=function(a,b){a.g!=null&&a.s&&a.l&&a.g.ma(b,a.A,\"EVENT_VIDEO_VIEW_TIMER\")},ir=new L;hr.prototype.D=!1;hr.prototype.B=!1;hr.prototype.v=!0;var pr={},qr=function(a){H.call(this);this.h=a;this.j={};this.g=null;bn(v(this.l,this))};p(qr,H);qr.prototype.l=function(a){this.g=a;this.g.Oc(this.h)};qr.prototype.C=function(){for(var a in this.j)this.h[a]=this.j[a];H.prototype.C.call(this)};t(\"studio.video.Reporter\",qr);var sr=function(a,b,c){var d=jr(a);typeof c===\"boolean\"&&(d.v=c);Vq(d.j);d.l=!0;d.s=!0;d.o=b;d.h=new fr(d.o);kr(d);rr.ja(a)||rr.set(a,new qr(b))};t(\"studio.video.Reporter.attach\",sr);var tr=function(a){a=jr(a);a.h==null||$q(a.h)||a.h.g.ended||(nr(a,\"stop\",!1),or(a,\"Stop\"),a.l=!1);lr(a,!1);a.s=!1;a.o=null;Vq(a.j);a.h&&(a.h.Ta(\"timeUpdate\",a.nd,!1,a),a.h.dispose())};t(\"studio.video.Reporter.detach\",tr);var rr=new L;var vr=function(a,b){A(\"Blob\"in r,\"getBlob is not supported in this browser.\");b=b?oe(b):{};b.responseType=\"blob\";return ur(\"GET\",a,b).then(function(c){return c.response})},ur=function(a,b,c){var d=c||{},e=new XMLHttpRequest;return Vh(new Lh(function(f,g){var k;try{e.open(a,b,!0)}catch(q){g(new wr(\"Error opening XHR: \"+q.message,b,e))}e.onreadystatechange=function(){if(e.readyState==4){r.clearTimeout(k);a:switch(e.status){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var q=!0;break a;default:q=!1}!q&&(q=e.status===0)&&(q=b.match(mg)[1]||null,!q&&r.self&&r.self.location&&(q=r.self.location.protocol.slice(0,-1)),q=q?q.toLowerCase():\"\",q=!(q==\"http\"||q==\"https\"||q==\"\"));q?f(e):g(new xr(e.status,b,e))}};e.onerror=function(){g(new wr(\"Network error\",b,e))};if(d.headers){for(var m in d.headers){var n=d.headers[m];n!=null&&e.setRequestHeader(m,n)}n=d.headers[\"Content-Type\"]}m=r.FormData&&!1;a!=\"POST\"||n!==void 0||m||e.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded;charset=utf-8\");d.withCredentials&&(e.withCredentials=d.withCredentials);d.responseType&&(e.responseType=d.responseType);d.mimeType&&e.overrideMimeType(d.mimeType);d.timeoutMs>0&&(k=r.setTimeout(function(){e.onreadystatechange=function(){};e.abort();g(new yr(b,e))},d.timeoutMs));try{e.send(null)}catch(q){e.onreadystatechange=function(){},r.clearTimeout(k),g(new wr(\"Error sending XHR: \"+q.message,b,e))}}),function(f){f instanceof Kh&&e.abort();throw f;})},wr=function(a,b){Sa.call(this,a+\", url=\"+b);this.url=b};y(wr,Sa);wr.prototype.name=\"XhrError\";var xr=function(a,b,c){wr.call(this,\"Request Failed, status=\"+a,b,c);this.status=a};y(xr,wr);xr.prototype.name=\"XhrHttpError\";var yr=function(a,b){wr.call(this,\"Request timed out\",a,b)};y(yr,wr);yr.prototype.name=\"XhrTimeoutError\";t(\"studio.sdk.video.VideoResource.getBlobForUrl\",function(a){return cn().then(function(b){b=b.Xa(a);window.location.protocol==\"file:\"?b=Qh(Error(\"You cannot fetch the blob of a video when running locally. Run a local web server to test this creative (For example, python -m SimpleHTTPServer).\")):nb(b,\"/itag/\")?(nb(b,\"/itag/\")&&!nb(b,\"/alr/yes/\")&&(b=b.split(\"/\"),b.splice(b.length-2,0,\"alr\",\"yes\"),b=b.join(\"/\")),b=zr(b).then(vr)):b=vr(b);return b})});function zr(a){return ur(\"HEAD\",a).then(function(b){return Ar(b)?ur(\"GET\",a).then(function(c){return zr(c.response)}):a})}function Ar(a){a=a.getResponseHeader(\"Content-Type\")||\"\";return nb(a,\"text/plain\")};");
