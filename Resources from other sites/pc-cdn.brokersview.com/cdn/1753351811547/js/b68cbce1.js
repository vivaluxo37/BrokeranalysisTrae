(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1123:function(e,t,n){e.exports={}},1124:function(e,t,n){e.exports={}},1476:function(e,t,n){e.exports=n.p+"img/defavatar.a9435171.png"},1477:function(e,t,n){"use strict";n(1123)},1478:function(e,t,n){"use strict";n(1124)},628:function(e,t,n){"use strict";var r=n(237),o=n(8);t.a={head:function(){var e=Object(o.m)(this.defaultSeo||{},this.seo||{}),title=e.title,t=e.description,n=e.shareTitle,c=e.shareDesc,image=e.image,meta=[{hid:"description",name:"description",content:t},{hid:"og:title",property:"og:title",content:n},{hid:"og:description",name:"og:description",content:c},{hid:"og:image",property:"og:image",content:image},{hid:"twitter:title",property:"twitter:title",content:n},{hid:"twitter:description",name:"twitter:description",content:c},{hid:"twitter:image",property:"twitter:image",content:image}],m=this.metaLink||[],l=this.metaScript||[];return{title:title||"BrokersView",meta:meta,link:[{hid:"alternate-h5",rel:"alternate",media:"only screen and (max-width:640px)",href:this.makeUrl({site:"https://m.brokersview.com"})}].concat(Object(r.a)(m)),script:l}}}},714:function(e,t,n){e.exports=n.p+"img/icon-huida.64a4f928.svg"},716:function(e,t,n){e.exports={}},750:function(e,t,n){"use strict";var r=n(16),o=n.n(r),input=(n(1),n(41),n(25)),c=n.n(input),m=(n(61),n(15),n(12),n(9),n(19),n(20),n(3));n(57);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(m.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var I={props:{rootReviewId:{type:[String,Number],default:0},targetItem:{type:Object,default:function(){return null}},autofocus:{type:Boolean,default:!1}},inject:{commentType:{},typeCode:{},commenter:{},commenterId:{default:0},level:{default:0}},data:function(){return{reviewMessage:"",loading:!1}},computed:{reviewTarget:function(){var e;return"broker"!==this.commentType||this.targetItem.user?this.targetItem||{id:0,user:(null===(e=this.commenter)||void 0===e?void 0:e.user)||{id:0}}:d(d({},this.targetItem),{},{user:{id:this.targetItem.uid}})}},mounted:function(){this.autofocus&&this.$el.querySelector(".el-textarea__inner").focus()},methods:{submitComment:function(){var e=this;if(this.reviewMessage.trim())if(this.$store.state.user.uid){var t="",n={},r=this.reviewTarget,o=r.id,c=r.user.id;"broker"===this.commentType?(t="/comment/addCommentReview",n={content:this.reviewMessage,brokerId:this.commenterId,replyUserId:c,rootId:this.rootReviewId,fatherId:o}):"news"===this.commentType?(t="/news/review",n={content:this.reviewMessage,newsId:this.commenterId,replyUserId:c,rootReviewId:this.rootReviewId,fatherId:o}):(t="/question/comment",n={content:this.reviewMessage,questionId:this.commenterId,replyUserId:c,rootReviewId:this.rootReviewId,reviewId:o,type:this.typeCode}),this.loading=!0,this.$axios.$post(t,n).then((function(t){e.reviewMessage="",e.$message(e.$t("tips_lable_4"),"success"),e.$emit("reviewSuccess",t),e.loading=!1})).catch((function(t){e.$message(t.message,"error"),e.loading=!1}))}else this.openLogin()}}},h=(n(767),n(4)),component=Object(h.a)(I,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"writeComment"},[t(c.a,{attrs:{type:"textarea",autosize:"",maxlength:"500",placeholder:e.$t("reviews_add_comment"),resize:"none"},model:{value:e.reviewMessage,callback:function(t){e.reviewMessage=t},expression:"reviewMessage"}}),e._v(" "),t(o.a,{attrs:{type:"success",disabled:!e.reviewMessage,loading:e.loading},on:{click:e.submitComment}},[e._v("\n    "+e._s(e.$t("submit"))+"\n  ")])],1)}),[],!1,null,"e535a976",null);t.a=component.exports},766:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjRweCIgaGVpZ2h0PSIyNHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+MC5pY29uLzI0L2NvbW1lbnQvcHJlPC90aXRsZT4KICAgIDxnIGlkPSLmjqfku7YiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSIwLmljb24vMjQvY29tbWVudC9wcmUiIGZpbGw9IiM2NjY2NjYiPgogICAgICAgICAgICA8cGF0aCBkPSJNMjIuMiwyIEwxLjgwMDAwMDAxLDIgQzEuNCwyIDEsMi4yOTk5OTk5OSAxLDIuNzk5OTk5OTkgTDEsMTcuNzI5OTE0NCBDMSwxOC4xMjk5MTQ0IDEuNCwxOC41Mjk5MTQ0IDEuODAwMDAwMDEsMTguNTI5OTE0NCBMNS43NDAxNjA1NiwxOC41ODYxNjkzIEw1Ljc0Mjc5Mjc5LDIxLjYyMzc4MjEgQzUuNzQyNzkyNzksMjEuOTIzNzgyMSA1Ljk0Mjc5Mjc5LDIyLjIyMzc4MjEgNi4xNDI3OTI3OSwyMi4zMjM3ODIxIEM2LjIyNjIyMjMyLDIyLjM3MzA3MzcgNi4yMzIyNjQ4LDIyLjM3MzA1NjkgNi4zMDI2MzIyMywyMi4zNjc1MjcxIEM2LjM3Mjk5OTY2LDIyLjM2MTk5NzMgNi43MDI2MzIyNCwyMi4yNjc1MjcxIDYuODAyNjMyMjMsMjIuMTY3NTI3MSBMMTEuMSwxOC41MDkzNzE2IEwyMi4yLDE4LjUwMzkxMjQgQzIyLjYsMTguNTAzOTEyNCAyMywxOC40OTQ1NDA4IDIzLDE4LjA5NDU0MDggTDIzLDIuNzk5OTk5OTkgQzIzLDIuMjk5OTk5OTkgMjIuNiwyIDIyLjIsMiBaIE02LDcgTDE4LDcgTDE4LDggTDYsOCBMNiw3IFogTTYsMTIgTDEzLDEyIEwxMywxMyBMNiwxMyBMNiwxMiBaIiBpZD0i5b2i54q2Ij48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},767:function(e,t,n){"use strict";n(716)},768:function(e,t,n){e.exports=n.p+"img/icon-like-c.48267efb.svg"},769:function(e,t,n){e.exports=n.p+"img/icon-dislike-c.a73934db.svg"},770:function(e,t,n){e.exports=n.p+"img/icon-like.9b653d2e.svg"},771:function(e,t,n){e.exports=n.p+"img/icon-dislike.3e6c0516.svg"},807:function(e,t,n){"use strict";var r=n(3),o=(n(57),n(37),n(15),n(12),n(9),n(19),n(20),n(750)),c=(n(21),{components:{WriteComment:o.a},props:{targetItem:{type:Object,default:function(){}},rootReviewId:{type:[String,Number],default:0},isChild:{type:Boolean,default:!1},replay:{type:Boolean,default:!0}},inject:["commentType","commenterId"],data:function(){return{showComment:!1,likeC:n(768),dislikeC:n(769),like:n(770),dislike:n(771)}},computed:{showAt:function(){var e=this.isChild,t=this.targetItem,n=this.rootReviewId,r=t.replyUser,o=t.user,c=t.fatherId,m=t.primaryId;return e&&r.id!==o.id&&(c||m)!==n}},methods:{onReviewSuccess:function(e){this.showComment=!1,this.$emit("reviewSuccess",e)},onSubmitCheck:function(e,t,n){var r=this;if(this.$store.state.user.uid)if(this.commenterId){var o;1===t?o=e?0:1:2===t&&(o=e?0:2);var option="news"===this.commentType?{method:"$post",url:"/news/review/attitude"}:{method:"$put",url:"/question/review/attitude"};this.$axios[option.method](option.url,{attitude:o,reviewId:this.targetItem.id}).then((function(e){1===t?(r.targetItem.liked=Boolean(o),o?(r.targetItem.unLikeCount>0&&r.targetItem.unliked&&(r.targetItem.unLikeCount-=1),r.targetItem.likeCount+=1):r.targetItem.likeCount-=1,r.targetItem.unliked=!1):2===t&&(r.targetItem.unliked=Boolean(o),o?(r.targetItem.likeCount>0&&r.targetItem.liked&&(r.targetItem.likeCount-=1),r.targetItem.unLikeCount+=1):r.targetItem.unLikeCount-=1,r.targetItem.liked=!1)})).catch((function(e){r.$message(e.message,"error")}))}else{var c=n.agreeType!==t,m=this.targetItem.id;this.$axios.$post("/comment/agree",{commentId:m,on:c,type:t}).then((function(e){1===t&&c?(n.agree++,n.disagree>0&&n.agreeType&&n.disagree--,n.agreeType=1):1!==t||c?2===t&&c?(n.disagree++,n.agree>0&&n.agreeType&&n.agree--,n.agreeType=2):(n.disagree>0&&n.agreeType&&n.disagree--,n.agreeType=0):(n.agree>0&&n.agreeType&&n.agree--,n.agreeType=0)})).catch((function(e){r.$message(e.message,"error")}))}else this.openLogin()}}}),m=(n(1477),n(4)),l=Object(m.a)(c,(function(){var e,t,r=this,o=r._self._c;return o("div",[o("div",{staticClass:"user_info"},[o("div",{staticClass:"img_box"},[o("BvImage",{staticClass:"cover",attrs:{src:(null===(e=r.targetItem.user)||void 0===e?void 0:e.avatar)||r.targetItem.avatar,alt:""}})],1),r._v(" "),o("span",{staticClass:"user_name"},[r._v("\n      "+r._s((null===(t=r.targetItem.user)||void 0===t?void 0:t.name)||r.targetItem.name)+"\n      "),r.showAt?[o("i",{staticClass:"at_icon"},[r._v("@")]),r._v("\n        "+r._s(r.targetItem.replyUser.name)+"\n      ")]:r._e()],2),r._v(" "),o("span",{staticClass:"reply_time"},[r._v(r._s(r._f("formatTime")(r.targetItem.createTime||r.targetItem.publishTime)))])]),r._v(" "),o("BvHtml",r._b({class:["comments_content"]},"BvHtml",{content:r.targetItem.content,type:"all"},!1)),r._v(" "),o("Translate",{staticStyle:{"margin-top":"10px"},attrs:{targets:[{parent:r.targetItem,target:"content"}]}}),r._v(" "),o("div",{staticClass:"user_yelp"},[r.commenterId&&r.replay?o("span",{staticClass:"user_yelp_item",on:{click:function(e){r.showComment=!r.showComment}}},[o("BvImage",{attrs:{src:r.showComment?n(766):n(714)}}),r._v("\n      "+r._s(r.showComment?r.$t("reviews_reply_cancel"):r.$t("reviews_reply"))+"\n    ")],1):r._e(),r._v(" "),o("span",{staticClass:"user_yelp_item",on:{click:function(e){return r.onSubmitCheck(r.targetItem.liked,1,r.targetItem)}}},[r.commenterId?o("BvImage",{attrs:{src:r.targetItem.liked?r.likeC:r.like}}):o("BvImage",{attrs:{src:1===r.targetItem.agreeType?r.likeC:r.like}}),r._v(" "),r.targetItem.likeCount?o("span",[r._v(r._s(r.targetItem.likeCount))]):r._e(),r._v(" "),r.targetItem.agree?o("span",[r._v(r._s(r.targetItem.agree))]):r._e()],1),r._v(" "),o("span",{staticClass:"user_yelp_item",on:{click:function(e){return r.onSubmitCheck(r.targetItem.unliked,2,r.targetItem)}}},[r.commenterId?o("BvImage",{attrs:{src:r.targetItem.unliked?r.dislikeC:r.dislike}}):o("BvImage",{attrs:{src:2===r.targetItem.agreeType?r.dislikeC:r.dislike}})],1)]),r._v(" "),r.showComment&&r.replay?o("write-comment",{attrs:{rootReviewId:r.rootReviewId,isChild:"",targetItem:r.targetItem},on:{reviewSuccess:r.onReviewSuccess}}):r._e()],1)}),[],!1,null,"4c84225d",null).exports;function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function I(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var h={components:{WriteComment:o.a,commentsItem:l},props:{commenter:{type:[Object],default:function(){return{}}},commentsCount:{type:[String,Number],default:0},commentType:{type:[String],default:"news"},replay:{type:Boolean,default:!0}},provide:function(){return{commentType:this.commentType,typeCode:{news:0,qa:1,complaint:2,video:3}[this.commentType],commenter:this.commenter,commenterId:this.commenterId}},data:function(){return{reviewCount:this.commentsCount,commentsList:[]}},computed:{commenterId:function(){return this.commenter.id}},watch:{reviewCount:function(e){this.$emit("update:commentsCount",e)}},mounted:function(){this.getComment()},methods:{getComment:function(){var e=this,option={news:{url:"/news/review/rootList",params:{index:1,size:100,newsId:this.commenterId}},qa:{url:"/question/review",params:{flag:0,index:1,size:100,questionId:this.commenterId,type:1}},complaint:{url:"/question/review",params:{flag:0,index:1,size:100,questionId:this.commenterId,type:2}},video:{url:"/question/review",params:{flag:0,index:1,size:100,questionId:this.commenterId,type:3}}}[this.commentType];this.$axios.$get(option.url,{params:option.params}).then((function(t){var n=t.data||[];e.commentsList=n.map((function(e){return I(I({},e),{},{childComment:e.firstRep?[e.firstRep]:[],showAllChild:!1})}))}))},getChildComment:function(e){var t=this,option={news:{url:"/news/review/childList",params:{newsId:this.commenterId,reviewId:e.id,index:1,size:999999}},qa:{url:"/question/review/child",params:{index:1,size:100,reviewId:e.id,questionId:this.commenterId,type:1}},complaint:{url:"/question/review/child",params:{index:1,size:100,reviewId:e.id,questionId:this.commenterId,type:2}},video:{url:"/question/review/child",params:{index:1,size:100,reviewId:e.id,questionId:this.commenterId,type:3}}}[this.commentType];this.$axios.$get(option.url,{params:option.params}).then((function(n){t.$set(e,"childComment",n.data||[]),t.$set(e,"showAllChild",!0)}))},onReviewSuccess:function(e){this.reviewCount+=1,this.commentsList.unshift(I(I({},e),{},{childComment:[],showAllChild:!1,childCount:0}))},onSecondReviewSuccess:function(e,t){this.reviewCount+=1;var n=t.childComment||[],r=t.showAllChild||!1;n.unshift(e);var o=(+t.childCount||0)+1;Object.assign(t,{childComment:n,showAllChild:r,childCount:o})},childCommentSwitch:function(e){if(e.childComment.length>=e.childCount)return e.showAllChild=!e.showAllChild;this.replay&&this.getChildComment(e)}}},v=(n(1478),Object(m.a)(h,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"news_comments"},[e.reviewCount?t("bv-text",{staticClass:"count_num",attrs:{tag:"p"}},[e._v("\n    "+e._s(e.$tc("tc_comments",e.reviewCount,[e.reviewCount]))+"\n  ")]):t("bv-text",{staticClass:"count_num",attrs:{tag:"p"}},[e._v(e._s(e.$t("comment")))]),e._v(" "),t("div",{staticClass:"top_replay"},[t("div",{staticClass:"img_box"},[t("BvImage",{staticClass:"cover",attrs:{src:e.$store.state.user.avatar||n(1476),alt:""}})],1),e._v(" "),t("WriteComment",{on:{reviewSuccess:e.onReviewSuccess}})],1),e._v(" "),t("ul",{staticClass:"comments_list"},e._l(e.commentsList,(function(n){return t("li",{key:n.id,staticClass:"comments_list_item"},[t("comments-item",{attrs:{targetItem:n,rootReviewId:n.id,replay:e.replay},on:{reviewSuccess:function(t){return e.onSecondReviewSuccess(t,n)}}}),e._v(" "),e.replay&&n.childComment&&n.childComment.length?t("ul",{staticClass:"childComments_list"},[e._l(n.childComment,(function(i,r){return t("li",{directives:[{name:"show",rawName:"v-show",value:0===r||n.showAllChild,expression:"idx === 0 || item.showAllChild"}],key:i.id,staticClass:"comments_list_item"},[t("comments-item",{attrs:{targetItem:i,rootReviewId:n.id,replay:e.replay,"is-child":""},on:{reviewSuccess:function(t){return e.onSecondReviewSuccess(t,n)}}})],1)})),e._v(" "),n.childCount>1?t("li",{staticClass:"collapse_btn",on:{click:function(t){return e.childCommentSwitch(n)}}},[t("span",[e._v("\n            "+e._s(n.showAllChild?e.$t("Hide_comments"):e.$t("View_commonets",[n.childCount-1]))+"\n          ")])]):e._e()],2):e._e()],1)})),0)],1)}),[],!1,null,"aaa29018",null));t.a=v.exports}}]);